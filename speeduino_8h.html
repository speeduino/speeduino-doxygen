<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Speeduino: speeduino/speeduino.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Speeduino_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Speeduino
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9dd927a2de2c3597e2b3a7dd174a4cd6.html">speeduino</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">speeduino.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Speeduino main file containing initial setup and system loop functions.  
<a href="#details">More...</a></p>

<p><a href="speeduino_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7460d44a013c2900845cfd018fbe491a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a7460d44a013c2900845cfd018fbe491a">PW</a> (int REQ_FUEL, byte VE, long MAP, uint16_t corrections, int <a class="el" href="globals_8h.html#a3560b0f7d53daefe16def5b9a303c625">injOpen</a>)</td></tr>
<tr class="memdesc:a7460d44a013c2900845cfd018fbe491a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the required pulsewidth time (in us) given the current system state.  <a href="#a7460d44a013c2900845cfd018fbe491a">More...</a><br /></td></tr>
<tr class="separator:a7460d44a013c2900845cfd018fbe491a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f6389d213ee4abeefee599a0658038"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aa4f6389d213ee4abeefee599a0658038">getVE1</a> ()</td></tr>
<tr class="memdesc:aa4f6389d213ee4abeefee599a0658038"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup the current VE value from the primary 3D fuel map. The Y axis value used for this lookup varies based on the fuel algorithm selected (speed density, alpha-n etc)  <a href="#aa4f6389d213ee4abeefee599a0658038">More...</a><br /></td></tr>
<tr class="separator:aa4f6389d213ee4abeefee599a0658038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a44883567136feaf073e8a179adc32"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a84a44883567136feaf073e8a179adc32">getVE2</a> ()</td></tr>
<tr class="memdesc:a84a44883567136feaf073e8a179adc32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up and returns the VE value from the secondary fuel table.  <a href="#a84a44883567136feaf073e8a179adc32">More...</a><br /></td></tr>
<tr class="separator:a84a44883567136feaf073e8a179adc32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c8f52de96bd5799f6c766514fd4b52e"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a1c8f52de96bd5799f6c766514fd4b52e">getAdvance</a> ()</td></tr>
<tr class="memdesc:a1c8f52de96bd5799f6c766514fd4b52e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a lookup of the ignition advance table. The values used to look this up will be RPM and whatever load source the user has configured.  <a href="#a1c8f52de96bd5799f6c766514fd4b52e">More...</a><br /></td></tr>
<tr class="separator:a1c8f52de96bd5799f6c766514fd4b52e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeacd9031d2d6a10295e8e615b919623"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#abeacd9031d2d6a10295e8e615b919623">calculateInjector2StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:abeacd9031d2d6a10295e8e615b919623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47914da66237a2a3abd9600f8bf0beee"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a47914da66237a2a3abd9600f8bf0beee">calculateInjector3StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:a47914da66237a2a3abd9600f8bf0beee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46a9d65dcd3ae2e91a29b9f7d99f394d"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a46a9d65dcd3ae2e91a29b9f7d99f394d">calculateInjector4StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:a46a9d65dcd3ae2e91a29b9f7d99f394d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c678665f346749376f9f8c3f26f121b"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8c678665f346749376f9f8c3f26f121b">calculateInjector5StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:a8c678665f346749376f9f8c3f26f121b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee805aade0c2279ffd85251494174991"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aee805aade0c2279ffd85251494174991">calculateIgnitionAngles</a> (int)</td></tr>
<tr class="separator:aee805aade0c2279ffd85251494174991"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3b20dbd79052be063c030cbe38344b94"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a3b20dbd79052be063c030cbe38344b94">req_fuel_uS</a></td></tr>
<tr class="separator:a3b20dbd79052be063c030cbe38344b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a23209328b74a1dc9b80349cfc4983"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a52a23209328b74a1dc9b80349cfc4983">inj_opentime_uS</a></td></tr>
<tr class="separator:a52a23209328b74a1dc9b80349cfc4983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aafcf78935efa6ebf3ce8bfe8896fa6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8aafcf78935efa6ebf3ce8bfe8896fa6">ignitionOn</a> = false</td></tr>
<tr class="separator:a8aafcf78935efa6ebf3ce8bfe8896fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49abe9dbfb79ad17c395ba783ed7d5c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a49abe9dbfb79ad17c395ba783ed7d5c7">fuelOn</a> = false</td></tr>
<tr class="separator:a49abe9dbfb79ad17c395ba783ed7d5c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d3a1d534af373ecd48c98ddf4774de1"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a1d3a1d534af373ecd48c98ddf4774de1">maxIgnOutputs</a> = 1</td></tr>
<tr class="separator:a1d3a1d534af373ecd48c98ddf4774de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863f675bd344892b5d38d7406ed771ee"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a863f675bd344892b5d38d7406ed771ee">curRollingCut</a> = 0</td></tr>
<tr class="separator:a863f675bd344892b5d38d7406ed771ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc82bbfca4938d905e62e04dd74b6aa"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#abbc82bbfca4938d905e62e04dd74b6aa">rollingCutCounter</a> = 0</td></tr>
<tr class="separator:abbc82bbfca4938d905e62e04dd74b6aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66793f211884912e6ad8a7df795dc01"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#af66793f211884912e6ad8a7df795dc01">rollingCutLastRev</a> = 0</td></tr>
<tr class="separator:af66793f211884912e6ad8a7df795dc01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab880d79dd5fd0910fe0f4b9622b38c77"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab880d79dd5fd0910fe0f4b9622b38c77">channel1IgnDegrees</a></td></tr>
<tr class="separator:ab880d79dd5fd0910fe0f4b9622b38c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c16e7f7ebef248fd62553b93a1171b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8c16e7f7ebef248fd62553b93a1171b6">channel2IgnDegrees</a></td></tr>
<tr class="separator:a8c16e7f7ebef248fd62553b93a1171b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb97dd392b46ed7c5a1a435d55eac055"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#adb97dd392b46ed7c5a1a435d55eac055">channel3IgnDegrees</a></td></tr>
<tr class="separator:adb97dd392b46ed7c5a1a435d55eac055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f79169133ff0f3d42a6d5b93a9e97b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a0f79169133ff0f3d42a6d5b93a9e97b5">channel4IgnDegrees</a></td></tr>
<tr class="separator:a0f79169133ff0f3d42a6d5b93a9e97b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1339d4ac180ccd6f9cc7563a41d522"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a3e1339d4ac180ccd6f9cc7563a41d522">channel5IgnDegrees</a></td></tr>
<tr class="separator:a3e1339d4ac180ccd6f9cc7563a41d522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1aec68719a59c62da3e0554758a08f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a3e1aec68719a59c62da3e0554758a08f">channel6IgnDegrees</a></td></tr>
<tr class="separator:a3e1aec68719a59c62da3e0554758a08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d37a88ef2039ecb52029f37ac6b599"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab3d37a88ef2039ecb52029f37ac6b599">channel7IgnDegrees</a></td></tr>
<tr class="separator:ab3d37a88ef2039ecb52029f37ac6b599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d7e1863a4c5ebf361cc92fbdfb53add"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a2d7e1863a4c5ebf361cc92fbdfb53add">channel8IgnDegrees</a></td></tr>
<tr class="separator:a2d7e1863a4c5ebf361cc92fbdfb53add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63ba1f24a7d0fbd41b11090f555223a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aa63ba1f24a7d0fbd41b11090f555223a">channel1InjDegrees</a></td></tr>
<tr class="separator:aa63ba1f24a7d0fbd41b11090f555223a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4beaec077a29c81e425b84919adb2b2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a4beaec077a29c81e425b84919adb2b2e">channel2InjDegrees</a></td></tr>
<tr class="separator:a4beaec077a29c81e425b84919adb2b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20a8028d46b0c4c51d52f0a921e777b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab20a8028d46b0c4c51d52f0a921e777b">channel3InjDegrees</a></td></tr>
<tr class="separator:ab20a8028d46b0c4c51d52f0a921e777b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cae413bf7f144ec4ead99fb0e2c6d26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a9cae413bf7f144ec4ead99fb0e2c6d26">channel4InjDegrees</a></td></tr>
<tr class="separator:a9cae413bf7f144ec4ead99fb0e2c6d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f910546354fd16fb3bc0d3f65c8818"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a45f910546354fd16fb3bc0d3f65c8818">channel5InjDegrees</a></td></tr>
<tr class="separator:a45f910546354fd16fb3bc0d3f65c8818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb485b51b3f0b51254077751ffad48d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#adfb485b51b3f0b51254077751ffad48d">channel6InjDegrees</a></td></tr>
<tr class="separator:adfb485b51b3f0b51254077751ffad48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34332292b05884e30d43230529428a4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a34332292b05884e30d43230529428a4c">channel7InjDegrees</a></td></tr>
<tr class="separator:a34332292b05884e30d43230529428a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693849a31b96f9b6dfc991cf744caf1f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a693849a31b96f9b6dfc991cf744caf1f">channel8InjDegrees</a></td></tr>
<tr class="separator:a693849a31b96f9b6dfc991cf744caf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Staging</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These values are a percentage of the total (Combined) req_fuel value that would be required for each injector channel to deliver that much fuel.</p>
<p>Eg:</p><ul>
<li>Pri injectors are 250cc</li>
<li>Sec injectors are 500cc</li>
<li>Total injector capacity = 750cc</li>
<li>staged_req_fuel_mult_pri = 300% (The primary injectors would have to run 3x the overall PW in order to be the equivalent of the full 750cc capacity</li>
<li>staged_req_fuel_mult_sec = 150% (The secondary injectors would have to run 1.5x the overall PW in order to be the equivalent of the full 750cc capacity </li>
</ul>
</div></td></tr>
<tr class="memitem:a13ef012561cb22a327fee50ef10555f5"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a13ef012561cb22a327fee50ef10555f5">staged_req_fuel_mult_pri</a></td></tr>
<tr class="separator:a13ef012561cb22a327fee50ef10555f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893db7275843064fb9d10a3fc2d61ab6"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a893db7275843064fb9d10a3fc2d61ab6">staged_req_fuel_mult_sec</a></td></tr>
<tr class="separator:a893db7275843064fb9d10a3fc2d61ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">IgnitionCallbacks</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These are the function pointers that get called to begin and end the ignition coil charging. They are required for the various spark output modes </p>
</div></td></tr>
<tr class="memitem:ac469c035751af0cc3af7fae227c474cb"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ac469c035751af0cc3af7fae227c474cb">ign1StartFunction</a> )()</td></tr>
<tr class="separator:ac469c035751af0cc3af7fae227c474cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b29302b08ae4e88e424ab914b786fd"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a35b29302b08ae4e88e424ab914b786fd">ign1EndFunction</a> )()</td></tr>
<tr class="separator:a35b29302b08ae4e88e424ab914b786fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34aa46f9d2b27c016e32ab236072151a"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a34aa46f9d2b27c016e32ab236072151a">ign2StartFunction</a> )()</td></tr>
<tr class="separator:a34aa46f9d2b27c016e32ab236072151a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aaebfabf07e5ccdbdd8e7b1046a5305"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a9aaebfabf07e5ccdbdd8e7b1046a5305">ign2EndFunction</a> )()</td></tr>
<tr class="separator:a9aaebfabf07e5ccdbdd8e7b1046a5305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae91506a7702c863164c4d6330b370c"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a3ae91506a7702c863164c4d6330b370c">ign3StartFunction</a> )()</td></tr>
<tr class="separator:a3ae91506a7702c863164c4d6330b370c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee75fc05ae3ed0b2b93db45a5f8c0745"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aee75fc05ae3ed0b2b93db45a5f8c0745">ign3EndFunction</a> )()</td></tr>
<tr class="separator:aee75fc05ae3ed0b2b93db45a5f8c0745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc043220545ef4bfdb2dfdcc37eb2db6"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#acc043220545ef4bfdb2dfdcc37eb2db6">ign4StartFunction</a> )()</td></tr>
<tr class="separator:acc043220545ef4bfdb2dfdcc37eb2db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2874d2ea59f90ee5c8cab90241318db6"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a2874d2ea59f90ee5c8cab90241318db6">ign4EndFunction</a> )()</td></tr>
<tr class="separator:a2874d2ea59f90ee5c8cab90241318db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48610c812bdd932a187958adccf5d393"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a48610c812bdd932a187958adccf5d393">ign5StartFunction</a> )()</td></tr>
<tr class="separator:a48610c812bdd932a187958adccf5d393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c4ab93218af8a0dcf440b85767f64fc"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a5c4ab93218af8a0dcf440b85767f64fc">ign5EndFunction</a> )()</td></tr>
<tr class="separator:a5c4ab93218af8a0dcf440b85767f64fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6fc47670bb082e97f0dc61e92347ee0"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ae6fc47670bb082e97f0dc61e92347ee0">ign6StartFunction</a> )()</td></tr>
<tr class="separator:ae6fc47670bb082e97f0dc61e92347ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad2f9c64fa4664108a5fb4bc777f6c0f"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aad2f9c64fa4664108a5fb4bc777f6c0f">ign6EndFunction</a> )()</td></tr>
<tr class="separator:aad2f9c64fa4664108a5fb4bc777f6c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6216e94f9af22eb5e1677fb27189172"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ae6216e94f9af22eb5e1677fb27189172">ign7StartFunction</a> )()</td></tr>
<tr class="separator:ae6216e94f9af22eb5e1677fb27189172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0373ae2a5a088d37be23fb65a0cb4d6d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a0373ae2a5a088d37be23fb65a0cb4d6d">ign7EndFunction</a> )()</td></tr>
<tr class="separator:a0373ae2a5a088d37be23fb65a0cb4d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa6c960ba83eb9138cf94ce13e28aa0"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a0fa6c960ba83eb9138cf94ce13e28aa0">ign8StartFunction</a> )()</td></tr>
<tr class="separator:a0fa6c960ba83eb9138cf94ce13e28aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6df5a5dd2022813a0c98c53595fe742"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aa6df5a5dd2022813a0c98c53595fe742">ign8EndFunction</a> )()</td></tr>
<tr class="separator:aa6df5a5dd2022813a0c98c53595fe742"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Speeduino main file containing initial setup and system loop functions. </p>
<dl class="section author"><dt>Author</dt><dd>Josh Stewart</dd></dl>
<p>This file contains the main system loop of the Speeduino core and thus much of the logic of the fuel and ignition algorithms is contained within this It is where calls to all the auxilliary control systems, sensor reads, comms etc are made</p>
<p>It also contains the <a class="el" href="speeduino_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup()</a> function that is called by the bootloader on system startup </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aee805aade0c2279ffd85251494174991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee805aade0c2279ffd85251494174991">&#9670;&nbsp;</a></span>calculateIgnitionAngles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calculateIgnitionAngles </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_aee805aade0c2279ffd85251494174991_cgraph.png" border="0" usemap="#speeduino_8h_aee805aade0c2279ffd85251494174991_cgraph" alt=""/></div>
<map name="speeduino_8h_aee805aade0c2279ffd85251494174991_cgraph" id="speeduino_8h_aee805aade0c2279ffd85251494174991_cgraph">
<area shape="rect" id="node2" href="table_8h.html#a462f96f099a0c20647d0a29e96e2e80c" title="table2D_getValue" alt="" coords="228,31,365,57"/>
<area shape="rect" id="node3" href="table_8ino.html#a44415f1af3b8aea925ce421079d102d0" title="Returns an axis (bin) value from the 2D table. This works regardless of whether that axis is bytes or..." alt="" coords="413,5,579,32"/>
<area shape="rect" id="node4" href="table_8ino.html#a41d05a9817e967d15de0c75a6e208db0" title="Returns an value from the 2D table given an index value. No interpolation is performed. " alt="" coords="413,56,579,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_aee805aade0c2279ffd85251494174991_icgraph.png" border="0" usemap="#speeduino_8h_aee805aade0c2279ffd85251494174991_icgraph" alt=""/></div>
<map name="speeduino_8h_aee805aade0c2279ffd85251494174991_icgraph" id="speeduino_8h_aee805aade0c2279ffd85251494174991_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="228,5,279,32"/>
</map>
</div>

</div>
</div>
<a id="abeacd9031d2d6a10295e8e615b919623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeacd9031d2d6a10295e8e615b919623">&#9670;&nbsp;</a></span>calculateInjector2StartAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector2StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph.png" border="0" usemap="#speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph" alt=""/></div>
<map name="speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph" id="speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="260,5,311,32"/>
</map>
</div>

</div>
</div>
<a id="a47914da66237a2a3abd9600f8bf0beee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47914da66237a2a3abd9600f8bf0beee">&#9670;&nbsp;</a></span>calculateInjector3StartAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector3StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph.png" border="0" usemap="#speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph" alt=""/></div>
<map name="speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph" id="speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="260,5,311,32"/>
</map>
</div>

</div>
</div>
<a id="a46a9d65dcd3ae2e91a29b9f7d99f394d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46a9d65dcd3ae2e91a29b9f7d99f394d">&#9670;&nbsp;</a></span>calculateInjector4StartAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector4StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph.png" border="0" usemap="#speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph" alt=""/></div>
<map name="speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph" id="speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="260,5,311,32"/>
</map>
</div>

</div>
</div>
<a id="a8c678665f346749376f9f8c3f26f121b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c678665f346749376f9f8c3f26f121b">&#9670;&nbsp;</a></span>calculateInjector5StartAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector5StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph.png" border="0" usemap="#speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph" alt=""/></div>
<map name="speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph" id="speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="260,5,311,32"/>
</map>
</div>

</div>
</div>
<a id="a1c8f52de96bd5799f6c766514fd4b52e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c8f52de96bd5799f6c766514fd4b52e">&#9670;&nbsp;</a></span>getAdvance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte getAdvance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a lookup of the ignition advance table. The values used to look this up will be RPM and whatever load source the user has configured. </p>
<dl class="section return"><dt>Returns</dt><dd>byte The current target advance value in degrees </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph.png" border="0" usemap="#speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph" alt=""/></div>
<map name="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph" id="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph">
<area shape="rect" id="node2" href="table_8h.html#abcb4d91b651f8d47cbaae711ed938a0f" title="get3DTableValue" alt="" coords="152,208,283,235"/>
<area shape="rect" id="node3" href="corrections_8h.html#ad4dd839eb4dc4a7b15f9cb42259cb45a" title="correctionsIgn" alt="" coords="160,259,275,285"/>
<area shape="rect" id="node4" href="corrections_8ino.html#aee1d4fbb202adcbcd7897ec4f5a4d61a" title="correctionFlexTiming" alt="" coords="363,5,522,32"/>
<area shape="rect" id="node8" href="corrections_8ino.html#a4e39632048b767d4e99dff044e438d93" title="correctionIATretard" alt="" coords="371,56,515,83"/>
<area shape="rect" id="node9" href="corrections_8ino.html#aae8b7388343e8a625ac01e5ebf0b646c" title="correctionCLTadvance" alt="" coords="361,107,524,133"/>
<area shape="rect" id="node10" href="corrections_8ino.html#abd2e82b2ab54719cc924e58520d18386" title="correctionIdleAdvance" alt="" coords="359,157,526,184"/>
<area shape="rect" id="node11" href="corrections_8ino.html#a6faae52d40cbf76c64b801882338a98a" title="correctionSoftRevLimit" alt="" coords="357,208,528,235"/>
<area shape="rect" id="node12" href="corrections_8ino.html#ad5078507a4afa59141d9fef911f6aabe" title="correctionNitrous" alt="" coords="375,259,510,285"/>
<area shape="rect" id="node13" href="corrections_8ino.html#a22aae0540f512c30d8db1d58e1464850" title="correctionSoftLaunch" alt="" coords="363,309,522,336"/>
<area shape="rect" id="node14" href="corrections_8ino.html#ad2cc7a83e39f10167f63e7eaf2ec5170" title="correctionSoftFlatShift" alt="" coords="359,360,526,387"/>
<area shape="rect" id="node15" href="corrections_8ino.html#aa11cf073fd170a6954f78ce498d5ab96" title="correctionKnock" alt="" coords="379,411,506,437"/>
<area shape="rect" id="node16" href="corrections_8ino.html#a28fd470690407ed9f2febf7682310e77" title="correctionFixedTiming" alt="" coords="359,461,526,488"/>
<area shape="rect" id="node17" href="corrections_8ino.html#a772dfea7ea13932573c8dbbc0933ca02" title="correctionCrankingFixedTiming" alt="" coords="331,512,555,539"/>
<area shape="rect" id="node5" href="table_8h.html#a462f96f099a0c20647d0a29e96e2e80c" title="table2D_getValue" alt="" coords="603,107,740,133"/>
<area shape="rect" id="node6" href="table_8ino.html#a44415f1af3b8aea925ce421079d102d0" title="Returns an axis (bin) value from the 2D table. This works regardless of whether that axis is bytes or..." alt="" coords="788,81,953,108"/>
<area shape="rect" id="node7" href="table_8ino.html#a41d05a9817e967d15de0c75a6e208db0" title="Returns an value from the 2D table given an index value. No interpolation is performed. " alt="" coords="788,132,953,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph.png" border="0" usemap="#speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph" alt=""/></div>
<map name="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph" id="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="152,5,203,32"/>
</map>
</div>

</div>
</div>
<a id="aa4f6389d213ee4abeefee599a0658038"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f6389d213ee4abeefee599a0658038">&#9670;&nbsp;</a></span>getVE1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte getVE1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lookup the current VE value from the primary 3D fuel map. The Y axis value used for this lookup varies based on the fuel algorithm selected (speed density, alpha-n etc) </p>
<dl class="section return"><dt>Returns</dt><dd>byte The current VE value </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_aa4f6389d213ee4abeefee599a0658038_cgraph.png" border="0" usemap="#speeduino_8h_aa4f6389d213ee4abeefee599a0658038_cgraph" alt=""/></div>
<map name="speeduino_8h_aa4f6389d213ee4abeefee599a0658038_cgraph" id="speeduino_8h_aa4f6389d213ee4abeefee599a0658038_cgraph">
<area shape="rect" id="node2" href="table_8h.html#abcb4d91b651f8d47cbaae711ed938a0f" title="get3DTableValue" alt="" coords="121,5,252,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_aa4f6389d213ee4abeefee599a0658038_icgraph.png" border="0" usemap="#speeduino_8h_aa4f6389d213ee4abeefee599a0658038_icgraph" alt=""/></div>
<map name="speeduino_8h_aa4f6389d213ee4abeefee599a0658038_icgraph" id="speeduino_8h_aa4f6389d213ee4abeefee599a0658038_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="121,5,172,32"/>
</map>
</div>

</div>
</div>
<a id="a84a44883567136feaf073e8a179adc32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a44883567136feaf073e8a179adc32">&#9670;&nbsp;</a></span>getVE2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte getVE2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks up and returns the VE value from the secondary fuel table. </p>
<p>This performs largely the same operations as getVE() however the lookup is of the secondary fuel table and uses the secondary load source </p><dl class="section return"><dt>Returns</dt><dd>byte </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a84a44883567136feaf073e8a179adc32_cgraph.png" border="0" usemap="#speeduino_8h_a84a44883567136feaf073e8a179adc32_cgraph" alt=""/></div>
<map name="speeduino_8h_a84a44883567136feaf073e8a179adc32_cgraph" id="speeduino_8h_a84a44883567136feaf073e8a179adc32_cgraph">
<area shape="rect" id="node2" href="table_8h.html#abcb4d91b651f8d47cbaae711ed938a0f" title="get3DTableValue" alt="" coords="121,5,252,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a84a44883567136feaf073e8a179adc32_icgraph.png" border="0" usemap="#speeduino_8h_a84a44883567136feaf073e8a179adc32_icgraph" alt=""/></div>
<map name="speeduino_8h_a84a44883567136feaf073e8a179adc32_icgraph" id="speeduino_8h_a84a44883567136feaf073e8a179adc32_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="121,5,172,32"/>
</map>
</div>

</div>
</div>
<a id="a7460d44a013c2900845cfd018fbe491a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7460d44a013c2900845cfd018fbe491a">&#9670;&nbsp;</a></span>PW()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PW </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>REQ_FUEL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>VE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>corrections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>injOpen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates the required pulsewidth time (in us) given the current system state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">REQ_FUEL</td><td>The required fuel value in uS, as calculated by TunerStudio </td></tr>
    <tr><td class="paramname">VE</td><td>Lookup from the main fuel table. This can either have been MAP or TPS based, depending on the algorithm used </td></tr>
    <tr><td class="paramname">MAP</td><td>In KPa, read from the sensor (This is used when performing a multiply of the map only. It is applicable in both Speed density and Alpha-N) </td></tr>
    <tr><td class="paramname">corrections</td><td>Sum of Enrichment factors (Cold start, acceleration). This is a multiplication factor (Eg to add 10%, this should be 110) </td></tr>
    <tr><td class="paramname">injOpen</td><td>Injector opening time. The time the injector take to open minus the time it takes to close (Both in uS) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint16_t The injector pulse width in uS </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a7460d44a013c2900845cfd018fbe491a_icgraph.png" border="0" usemap="#speeduino_8h_a7460d44a013c2900845cfd018fbe491a_icgraph" alt=""/></div>
<map name="speeduino_8h_a7460d44a013c2900845cfd018fbe491a_icgraph" id="speeduino_8h_a7460d44a013c2900845cfd018fbe491a_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="96,5,147,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab880d79dd5fd0910fe0f4b9622b38c77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab880d79dd5fd0910fe0f4b9622b38c77">&#9670;&nbsp;</a></span>channel1IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel1IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 1 is at TDC (This is obviously 0 for virtually ALL engines, but there's some weird ones) </p>

</div>
</div>
<a id="aa63ba1f24a7d0fbd41b11090f555223a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa63ba1f24a7d0fbd41b11090f555223a">&#9670;&nbsp;</a></span>channel1InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel1InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 1 is at TDC (This is obviously 0 for virtually ALL engines, but there's some weird ones) </p>

</div>
</div>
<a id="a8c16e7f7ebef248fd62553b93a1171b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c16e7f7ebef248fd62553b93a1171b6">&#9670;&nbsp;</a></span>channel2IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel2IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 2 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a id="a4beaec077a29c81e425b84919adb2b2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4beaec077a29c81e425b84919adb2b2e">&#9670;&nbsp;</a></span>channel2InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel2InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 2 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a id="adb97dd392b46ed7c5a1a435d55eac055"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb97dd392b46ed7c5a1a435d55eac055">&#9670;&nbsp;</a></span>channel3IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel3IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 3 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a id="ab20a8028d46b0c4c51d52f0a921e777b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20a8028d46b0c4c51d52f0a921e777b">&#9670;&nbsp;</a></span>channel3InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel3InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 3 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a id="a0f79169133ff0f3d42a6d5b93a9e97b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f79169133ff0f3d42a6d5b93a9e97b5">&#9670;&nbsp;</a></span>channel4IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel4IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 4 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a id="a9cae413bf7f144ec4ead99fb0e2c6d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cae413bf7f144ec4ead99fb0e2c6d26">&#9670;&nbsp;</a></span>channel4InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel4InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 4 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a id="a3e1339d4ac180ccd6f9cc7563a41d522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e1339d4ac180ccd6f9cc7563a41d522">&#9670;&nbsp;</a></span>channel5IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel5IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 5 is at TDC </p>

</div>
</div>
<a id="a45f910546354fd16fb3bc0d3f65c8818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f910546354fd16fb3bc0d3f65c8818">&#9670;&nbsp;</a></span>channel5InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel5InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 5 is at TDC </p>

</div>
</div>
<a id="a3e1aec68719a59c62da3e0554758a08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e1aec68719a59c62da3e0554758a08f">&#9670;&nbsp;</a></span>channel6IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel6IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 6 is at TDC </p>

</div>
</div>
<a id="adfb485b51b3f0b51254077751ffad48d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfb485b51b3f0b51254077751ffad48d">&#9670;&nbsp;</a></span>channel6InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel6InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 6 is at TDC </p>

</div>
</div>
<a id="ab3d37a88ef2039ecb52029f37ac6b599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3d37a88ef2039ecb52029f37ac6b599">&#9670;&nbsp;</a></span>channel7IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel7IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 7 is at TDC </p>

</div>
</div>
<a id="a34332292b05884e30d43230529428a4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34332292b05884e30d43230529428a4c">&#9670;&nbsp;</a></span>channel7InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel7InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 7 is at TDC </p>

</div>
</div>
<a id="a2d7e1863a4c5ebf361cc92fbdfb53add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d7e1863a4c5ebf361cc92fbdfb53add">&#9670;&nbsp;</a></span>channel8IgnDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel8IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 8 is at TDC </p>

</div>
</div>
<a id="a693849a31b96f9b6dfc991cf744caf1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a693849a31b96f9b6dfc991cf744caf1f">&#9670;&nbsp;</a></span>channel8InjDegrees</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel8InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 8 is at TDC </p>

</div>
</div>
<a id="a863f675bd344892b5d38d7406ed771ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a863f675bd344892b5d38d7406ed771ee">&#9670;&nbsp;</a></span>curRollingCut</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte curRollingCut = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rolling rev limiter, current ignition channel being cut </p>

</div>
</div>
<a id="a49abe9dbfb79ad17c395ba783ed7d5c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49abe9dbfb79ad17c395ba783ed7d5c7">&#9670;&nbsp;</a></span>fuelOn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fuelOn = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current state of the fuel system (on or off) </p>

</div>
</div>
<a id="a35b29302b08ae4e88e424ab914b786fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35b29302b08ae4e88e424ab914b786fd">&#9670;&nbsp;</a></span>ign1EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign1EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac469c035751af0cc3af7fae227c474cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac469c035751af0cc3af7fae227c474cb">&#9670;&nbsp;</a></span>ign1StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign1StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9aaebfabf07e5ccdbdd8e7b1046a5305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aaebfabf07e5ccdbdd8e7b1046a5305">&#9670;&nbsp;</a></span>ign2EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign2EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a34aa46f9d2b27c016e32ab236072151a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34aa46f9d2b27c016e32ab236072151a">&#9670;&nbsp;</a></span>ign2StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign2StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aee75fc05ae3ed0b2b93db45a5f8c0745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee75fc05ae3ed0b2b93db45a5f8c0745">&#9670;&nbsp;</a></span>ign3EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign3EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ae91506a7702c863164c4d6330b370c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ae91506a7702c863164c4d6330b370c">&#9670;&nbsp;</a></span>ign3StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign3StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2874d2ea59f90ee5c8cab90241318db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2874d2ea59f90ee5c8cab90241318db6">&#9670;&nbsp;</a></span>ign4EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign4EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acc043220545ef4bfdb2dfdcc37eb2db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc043220545ef4bfdb2dfdcc37eb2db6">&#9670;&nbsp;</a></span>ign4StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign4StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5c4ab93218af8a0dcf440b85767f64fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c4ab93218af8a0dcf440b85767f64fc">&#9670;&nbsp;</a></span>ign5EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign5EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a48610c812bdd932a187958adccf5d393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48610c812bdd932a187958adccf5d393">&#9670;&nbsp;</a></span>ign5StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign5StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aad2f9c64fa4664108a5fb4bc777f6c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad2f9c64fa4664108a5fb4bc777f6c0f">&#9670;&nbsp;</a></span>ign6EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign6EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae6fc47670bb082e97f0dc61e92347ee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6fc47670bb082e97f0dc61e92347ee0">&#9670;&nbsp;</a></span>ign6StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign6StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0373ae2a5a088d37be23fb65a0cb4d6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0373ae2a5a088d37be23fb65a0cb4d6d">&#9670;&nbsp;</a></span>ign7EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign7EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae6216e94f9af22eb5e1677fb27189172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6216e94f9af22eb5e1677fb27189172">&#9670;&nbsp;</a></span>ign7StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign7StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa6df5a5dd2022813a0c98c53595fe742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6df5a5dd2022813a0c98c53595fe742">&#9670;&nbsp;</a></span>ign8EndFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign8EndFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0fa6c960ba83eb9138cf94ce13e28aa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fa6c960ba83eb9138cf94ce13e28aa0">&#9670;&nbsp;</a></span>ign8StartFunction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign8StartFunction) ()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8aafcf78935efa6ebf3ce8bfe8896fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aafcf78935efa6ebf3ce8bfe8896fa6">&#9670;&nbsp;</a></span>ignitionOn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ignitionOn = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current state of the ignition system (on or off) </p>

</div>
</div>
<a id="a52a23209328b74a1dc9b80349cfc4983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52a23209328b74a1dc9b80349cfc4983">&#9670;&nbsp;</a></span>inj_opentime_uS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t inj_opentime_uS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The injector opening time. This is set within Tuner Studio, but stored here in uS rather than mS </p>

</div>
</div>
<a id="a1d3a1d534af373ecd48c98ddf4774de1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d3a1d534af373ecd48c98ddf4774de1">&#9670;&nbsp;</a></span>maxIgnOutputs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte maxIgnOutputs = 1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used for rolling rev limiter to indicate how many total ignition channels should currently be firing </p>

</div>
</div>
<a id="a3b20dbd79052be063c030cbe38344b94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b20dbd79052be063c030cbe38344b94">&#9670;&nbsp;</a></span>req_fuel_uS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t req_fuel_uS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The required fuel variable (As calculated by TunerStudio) in uS </p>

</div>
</div>
<a id="abbc82bbfca4938d905e62e04dd74b6aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbc82bbfca4938d905e62e04dd74b6aa">&#9670;&nbsp;</a></span>rollingCutCounter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte rollingCutCounter = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>how many times (revolutions) the ignition has been cut in a row </p>

</div>
</div>
<a id="af66793f211884912e6ad8a7df795dc01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af66793f211884912e6ad8a7df795dc01">&#9670;&nbsp;</a></span>rollingCutLastRev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rollingCutLastRev = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tracks whether we're on the same or a different rev for the rolling cut </p>

</div>
</div>
<a id="a13ef012561cb22a327fee50ef10555f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13ef012561cb22a327fee50ef10555f5">&#9670;&nbsp;</a></span>staged_req_fuel_mult_pri</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t staged_req_fuel_mult_pri</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a893db7275843064fb9d10a3fc2d61ab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893db7275843064fb9d10a3fc2d61ab6">&#9670;&nbsp;</a></span>staged_req_fuel_mult_sec</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t staged_req_fuel_mult_sec</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
