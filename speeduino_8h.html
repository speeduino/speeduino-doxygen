<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Speeduino: speeduino/speeduino.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Speeduino
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9dd927a2de2c3597e2b3a7dd174a4cd6.html">speeduino</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">speeduino.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Speeduino main file containing initial setup and system loop functions.  
<a href="#details">More...</a></p>

<p><a href="speeduino_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aea6e20ae30e4d32ea2528cd270053183"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aea6e20ae30e4d32ea2528cd270053183">PW</a> (int REQ_FUEL, byte VE, long MAP, int corrections, int <a class="el" href="globals_8h.html#a3560b0f7d53daefe16def5b9a303c625">injOpen</a>)</td></tr>
<tr class="memdesc:aea6e20ae30e4d32ea2528cd270053183"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the required pulsewidth time (in us) given the current system state.  <a href="#aea6e20ae30e4d32ea2528cd270053183">More...</a><br/></td></tr>
<tr class="separator:aea6e20ae30e4d32ea2528cd270053183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba3f43b67e5536f763c0911c2de0d84"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8ba3f43b67e5536f763c0911c2de0d84">getVE</a> ()</td></tr>
<tr class="memdesc:a8ba3f43b67e5536f763c0911c2de0d84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup the current VE value from the primary 3D fuel map. The Y axis value used for this lookup varies based on the fuel algorithm selected (speed density, alpha-n etc)  <a href="#a8ba3f43b67e5536f763c0911c2de0d84">More...</a><br/></td></tr>
<tr class="separator:a8ba3f43b67e5536f763c0911c2de0d84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c8f52de96bd5799f6c766514fd4b52e"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a1c8f52de96bd5799f6c766514fd4b52e">getAdvance</a> ()</td></tr>
<tr class="memdesc:a1c8f52de96bd5799f6c766514fd4b52e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a lookup of the ignition advance table. The values used to look this up will be RPM and whatever load source the user has configured.  <a href="#a1c8f52de96bd5799f6c766514fd4b52e">More...</a><br/></td></tr>
<tr class="separator:a1c8f52de96bd5799f6c766514fd4b52e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeacd9031d2d6a10295e8e615b919623"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#abeacd9031d2d6a10295e8e615b919623">calculateInjector2StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:abeacd9031d2d6a10295e8e615b919623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47914da66237a2a3abd9600f8bf0beee"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a47914da66237a2a3abd9600f8bf0beee">calculateInjector3StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:a47914da66237a2a3abd9600f8bf0beee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46a9d65dcd3ae2e91a29b9f7d99f394d"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a46a9d65dcd3ae2e91a29b9f7d99f394d">calculateInjector4StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:a46a9d65dcd3ae2e91a29b9f7d99f394d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c678665f346749376f9f8c3f26f121b"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8c678665f346749376f9f8c3f26f121b">calculateInjector5StartAngle</a> (unsigned int)</td></tr>
<tr class="separator:a8c678665f346749376f9f8c3f26f121b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:add94b67c28e6368081a7f29347e363e3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconfig2.html">config2</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#add94b67c28e6368081a7f29347e363e3">configPage2</a></td></tr>
<tr class="separator:add94b67c28e6368081a7f29347e363e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9d7b69a1e7d27adece4758473af80af"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconfig4.html">config4</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ae9d7b69a1e7d27adece4758473af80af">configPage4</a></td></tr>
<tr class="separator:ae9d7b69a1e7d27adece4758473af80af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2eb2083468e98f610294cd25458f578"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconfig6.html">config6</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ad2eb2083468e98f610294cd25458f578">configPage6</a></td></tr>
<tr class="separator:ad2eb2083468e98f610294cd25458f578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeee1f66f241f5b98ce64b8790121b89"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconfig9.html">config9</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aaeee1f66f241f5b98ce64b8790121b89">configPage9</a></td></tr>
<tr class="separator:aaeee1f66f241f5b98ce64b8790121b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9037f3992577af52afcf85002e9f4dd7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconfig10.html">config10</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a9037f3992577af52afcf85002e9f4dd7">configPage10</a></td></tr>
<tr class="separator:a9037f3992577af52afcf85002e9f4dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b20dbd79052be063c030cbe38344b94"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a3b20dbd79052be063c030cbe38344b94">req_fuel_uS</a></td></tr>
<tr class="separator:a3b20dbd79052be063c030cbe38344b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a23209328b74a1dc9b80349cfc4983"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a52a23209328b74a1dc9b80349cfc4983">inj_opentime_uS</a></td></tr>
<tr class="separator:a52a23209328b74a1dc9b80349cfc4983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aafcf78935efa6ebf3ce8bfe8896fa6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8aafcf78935efa6ebf3ce8bfe8896fa6">ignitionOn</a> = false</td></tr>
<tr class="separator:a8aafcf78935efa6ebf3ce8bfe8896fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49abe9dbfb79ad17c395ba783ed7d5c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a49abe9dbfb79ad17c395ba783ed7d5c7">fuelOn</a> = false</td></tr>
<tr class="separator:a49abe9dbfb79ad17c395ba783ed7d5c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25dec7d77cf1c281884f4215ad9fc4b8"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a25dec7d77cf1c281884f4215ad9fc4b8">cltCalibrationTable</a> [<a class="el" href="globals_8h.html#ae6818c8663b6e1efdd2cacbabf810c2c">CALIBRATION_TABLE_SIZE</a>]</td></tr>
<tr class="separator:a25dec7d77cf1c281884f4215ad9fc4b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3528ba8aa0afcfaa14653df9e72781"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#abc3528ba8aa0afcfaa14653df9e72781">iatCalibrationTable</a> [<a class="el" href="globals_8h.html#ae6818c8663b6e1efdd2cacbabf810c2c">CALIBRATION_TABLE_SIZE</a>]</td></tr>
<tr class="separator:abc3528ba8aa0afcfaa14653df9e72781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0c14f053668dce5a7474df6a3199c2"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a1e0c14f053668dce5a7474df6a3199c2">o2CalibrationTable</a> [<a class="el" href="globals_8h.html#ae6818c8663b6e1efdd2cacbabf810c2c">CALIBRATION_TABLE_SIZE</a>]</td></tr>
<tr class="separator:a1e0c14f053668dce5a7474df6a3199c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ad906e34abe5d3fd7f7f628110fbe5"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a45ad906e34abe5d3fd7f7f628110fbe5">currentLoopTime</a></td></tr>
<tr class="separator:a45ad906e34abe5d3fd7f7f628110fbe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c1270967c0f23dcc46f4ff54808795c"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8c1270967c0f23dcc46f4ff54808795c">previousLoopTime</a></td></tr>
<tr class="separator:a8c1270967c0f23dcc46f4ff54808795c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d3a1d534af373ecd48c98ddf4774de1"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a1d3a1d534af373ecd48c98ddf4774de1">maxIgnOutputs</a> = 1</td></tr>
<tr class="separator:a1d3a1d534af373ecd48c98ddf4774de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863f675bd344892b5d38d7406ed771ee"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a863f675bd344892b5d38d7406ed771ee">curRollingCut</a> = 0</td></tr>
<tr class="separator:a863f675bd344892b5d38d7406ed771ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc82bbfca4938d905e62e04dd74b6aa"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#abbc82bbfca4938d905e62e04dd74b6aa">rollingCutCounter</a> = 0</td></tr>
<tr class="separator:abbc82bbfca4938d905e62e04dd74b6aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66793f211884912e6ad8a7df795dc01"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#af66793f211884912e6ad8a7df795dc01">rollingCutLastRev</a> = 0</td></tr>
<tr class="separator:af66793f211884912e6ad8a7df795dc01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab880d79dd5fd0910fe0f4b9622b38c77"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab880d79dd5fd0910fe0f4b9622b38c77">channel1IgnDegrees</a></td></tr>
<tr class="separator:ab880d79dd5fd0910fe0f4b9622b38c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c16e7f7ebef248fd62553b93a1171b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8c16e7f7ebef248fd62553b93a1171b6">channel2IgnDegrees</a></td></tr>
<tr class="separator:a8c16e7f7ebef248fd62553b93a1171b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb97dd392b46ed7c5a1a435d55eac055"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#adb97dd392b46ed7c5a1a435d55eac055">channel3IgnDegrees</a></td></tr>
<tr class="separator:adb97dd392b46ed7c5a1a435d55eac055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f79169133ff0f3d42a6d5b93a9e97b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a0f79169133ff0f3d42a6d5b93a9e97b5">channel4IgnDegrees</a></td></tr>
<tr class="separator:a0f79169133ff0f3d42a6d5b93a9e97b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1339d4ac180ccd6f9cc7563a41d522"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a3e1339d4ac180ccd6f9cc7563a41d522">channel5IgnDegrees</a></td></tr>
<tr class="separator:a3e1339d4ac180ccd6f9cc7563a41d522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1aec68719a59c62da3e0554758a08f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a3e1aec68719a59c62da3e0554758a08f">channel6IgnDegrees</a></td></tr>
<tr class="separator:a3e1aec68719a59c62da3e0554758a08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d37a88ef2039ecb52029f37ac6b599"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab3d37a88ef2039ecb52029f37ac6b599">channel7IgnDegrees</a></td></tr>
<tr class="separator:ab3d37a88ef2039ecb52029f37ac6b599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d7e1863a4c5ebf361cc92fbdfb53add"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a2d7e1863a4c5ebf361cc92fbdfb53add">channel8IgnDegrees</a></td></tr>
<tr class="separator:a2d7e1863a4c5ebf361cc92fbdfb53add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63ba1f24a7d0fbd41b11090f555223a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aa63ba1f24a7d0fbd41b11090f555223a">channel1InjDegrees</a></td></tr>
<tr class="separator:aa63ba1f24a7d0fbd41b11090f555223a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4beaec077a29c81e425b84919adb2b2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a4beaec077a29c81e425b84919adb2b2e">channel2InjDegrees</a></td></tr>
<tr class="separator:a4beaec077a29c81e425b84919adb2b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20a8028d46b0c4c51d52f0a921e777b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab20a8028d46b0c4c51d52f0a921e777b">channel3InjDegrees</a></td></tr>
<tr class="separator:ab20a8028d46b0c4c51d52f0a921e777b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cae413bf7f144ec4ead99fb0e2c6d26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a9cae413bf7f144ec4ead99fb0e2c6d26">channel4InjDegrees</a></td></tr>
<tr class="separator:a9cae413bf7f144ec4ead99fb0e2c6d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f910546354fd16fb3bc0d3f65c8818"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a45f910546354fd16fb3bc0d3f65c8818">channel5InjDegrees</a></td></tr>
<tr class="separator:a45f910546354fd16fb3bc0d3f65c8818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb485b51b3f0b51254077751ffad48d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#adfb485b51b3f0b51254077751ffad48d">channel6InjDegrees</a></td></tr>
<tr class="separator:adfb485b51b3f0b51254077751ffad48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34332292b05884e30d43230529428a4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a34332292b05884e30d43230529428a4c">channel7InjDegrees</a></td></tr>
<tr class="separator:a34332292b05884e30d43230529428a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693849a31b96f9b6dfc991cf744caf1f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a693849a31b96f9b6dfc991cf744caf1f">channel8InjDegrees</a></td></tr>
<tr class="separator:a693849a31b96f9b6dfc991cf744caf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Staging</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These values are a percentage of the total (Combined) req_fuel value that would be required for each injector channel to deliver that much fuel.</p>
<p>Eg:</p>
<ul>
<li>Pri injectors are 250cc</li>
<li>Sec injectors are 500cc</li>
<li>Total injector capacity = 750cc</li>
<li>staged_req_fuel_mult_pri = 300% (The primary injectors would have to run 3x the overall PW in order to be the equivalent of the full 750cc capacity</li>
<li>staged_req_fuel_mult_sec = 150% (The secondary injectors would have to run 1.5x the overall PW in order to be the equivalent of the full 750cc capacity </li>
</ul>
</div></td></tr>
<tr class="memitem:a13ef012561cb22a327fee50ef10555f5"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a13ef012561cb22a327fee50ef10555f5">staged_req_fuel_mult_pri</a></td></tr>
<tr class="separator:a13ef012561cb22a327fee50ef10555f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893db7275843064fb9d10a3fc2d61ab6"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a893db7275843064fb9d10a3fc2d61ab6">staged_req_fuel_mult_sec</a></td></tr>
<tr class="separator:a893db7275843064fb9d10a3fc2d61ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">IgnitionCallbacks</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These are the function pointers that get called to begin and end the ignition coil charging. They are required for the various spark output modes </p>
</div></td></tr>
<tr class="memitem:ae7ee008323b50e326396f991521bae59"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ae7ee008323b50e326396f991521bae59">ign1StartFunction</a> )()</td></tr>
<tr class="separator:ae7ee008323b50e326396f991521bae59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ecf7ff00301b5b9945dd10e0a0ea60a"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a6ecf7ff00301b5b9945dd10e0a0ea60a">ign1EndFunction</a> )()</td></tr>
<tr class="separator:a6ecf7ff00301b5b9945dd10e0a0ea60a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab81432a945abc54f80bd4954da1a59"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#aaab81432a945abc54f80bd4954da1a59">ign2StartFunction</a> )()</td></tr>
<tr class="separator:aaab81432a945abc54f80bd4954da1a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26652fbb1f7ab7d92c3b44a7edb4e5a"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab26652fbb1f7ab7d92c3b44a7edb4e5a">ign2EndFunction</a> )()</td></tr>
<tr class="separator:ab26652fbb1f7ab7d92c3b44a7edb4e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eb467a2d0bd33f646d3dddd57d1956d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a8eb467a2d0bd33f646d3dddd57d1956d">ign3StartFunction</a> )()</td></tr>
<tr class="separator:a8eb467a2d0bd33f646d3dddd57d1956d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addfecce63df5e92a3677a74def256c42"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#addfecce63df5e92a3677a74def256c42">ign3EndFunction</a> )()</td></tr>
<tr class="separator:addfecce63df5e92a3677a74def256c42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2c01daa1d110a8f4b82fd83afd7ed2"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a0d2c01daa1d110a8f4b82fd83afd7ed2">ign4StartFunction</a> )()</td></tr>
<tr class="separator:a0d2c01daa1d110a8f4b82fd83afd7ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5d89f65ec3048308c10dc4a17dc55b"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a1e5d89f65ec3048308c10dc4a17dc55b">ign4EndFunction</a> )()</td></tr>
<tr class="separator:a1e5d89f65ec3048308c10dc4a17dc55b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663fff96ef6b34fc02ba065bec994959"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a663fff96ef6b34fc02ba065bec994959">ign5StartFunction</a> )()</td></tr>
<tr class="separator:a663fff96ef6b34fc02ba065bec994959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65ce1ee3bbe4152e0bc041ba522ae5a3"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a65ce1ee3bbe4152e0bc041ba522ae5a3">ign5EndFunction</a> )()</td></tr>
<tr class="separator:a65ce1ee3bbe4152e0bc041ba522ae5a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b744a54a0ddcd8f9c28ec212bcbe7a"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a36b744a54a0ddcd8f9c28ec212bcbe7a">ign6StartFunction</a> )()</td></tr>
<tr class="separator:a36b744a54a0ddcd8f9c28ec212bcbe7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894d94233309345c03cf63ba830188d5"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a894d94233309345c03cf63ba830188d5">ign6EndFunction</a> )()</td></tr>
<tr class="separator:a894d94233309345c03cf63ba830188d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50bb31a754eb62acbfb87b2f3923c4ac"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a50bb31a754eb62acbfb87b2f3923c4ac">ign7StartFunction</a> )()</td></tr>
<tr class="separator:a50bb31a754eb62acbfb87b2f3923c4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7cbf3d916b93038cd7b859d107506f"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ade7cbf3d916b93038cd7b859d107506f">ign7EndFunction</a> )()</td></tr>
<tr class="separator:ade7cbf3d916b93038cd7b859d107506f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab915c49c19de8d7babfa0f1ac2569ccc"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#ab915c49c19de8d7babfa0f1ac2569ccc">ign8StartFunction</a> )()</td></tr>
<tr class="separator:ab915c49c19de8d7babfa0f1ac2569ccc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f16b66cd42e9db46157e7455679ca11"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speeduino_8h.html#a7f16b66cd42e9db46157e7455679ca11">ign8EndFunction</a> )()</td></tr>
<tr class="separator:a7f16b66cd42e9db46157e7455679ca11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Speeduino main file containing initial setup and system loop functions. </p>
<dl class="section author"><dt>Author</dt><dd>Josh Stewart</dd></dl>
<p>This file contains the main system loop of the Speeduino core and thus much of the logic of the fuel and ignition algorithms is contained within this It is where calls to all the auxilliary control systems, sensor reads, comms etc are made</p>
<p>It also contains the <a class="el" href="speeduino_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup()</a> function that is called by the bootloader on system startup </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="abeacd9031d2d6a10295e8e615b919623"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector2StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph.png" border="0" usemap="#speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph" alt=""/></div>
<map name="speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph" id="speeduino_8h_abeacd9031d2d6a10295e8e615b919623_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="241,5,287,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a47914da66237a2a3abd9600f8bf0beee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector3StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph.png" border="0" usemap="#speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph" alt=""/></div>
<map name="speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph" id="speeduino_8h_a47914da66237a2a3abd9600f8bf0beee_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="241,5,287,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a46a9d65dcd3ae2e91a29b9f7d99f394d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector4StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph.png" border="0" usemap="#speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph" alt=""/></div>
<map name="speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph" id="speeduino_8h_a46a9d65dcd3ae2e91a29b9f7d99f394d_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="241,5,287,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8c678665f346749376f9f8c3f26f121b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculateInjector5StartAngle </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph.png" border="0" usemap="#speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph" alt=""/></div>
<map name="speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph" id="speeduino_8h_a8c678665f346749376f9f8c3f26f121b_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="241,5,287,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c8f52de96bd5799f6c766514fd4b52e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte getAdvance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a lookup of the ignition advance table. The values used to look this up will be RPM and whatever load source the user has configured. </p>
<dl class="section return"><dt>Returns</dt><dd>byte The current target advance value in degrees </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph.png" border="0" usemap="#speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph" alt=""/></div>
<map name="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph" id="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_cgraph">
<area shape="rect" id="node2" href="table_8h.html#abcb4d91b651f8d47cbaae711ed938a0f" title="get3DTableValue" alt="" coords="144,183,267,209"/><area shape="rect" id="node3" href="corrections_8h.html#ad4dd839eb4dc4a7b15f9cb42259cb45a" title="correctionsIgn" alt="" coords="153,233,257,260"/><area shape="rect" id="node4" href="corrections_8ino.html#a18ae54266369c0e78436f3526dda729e" title="correctionFlexTiming" alt="" coords="345,5,487,32"/><area shape="rect" id="node6" href="corrections_8ino.html#a48d1d2ae11cd91eb57a6c7e6bc61fdc5" title="correctionIATretard" alt="" coords="349,56,483,83"/><area shape="rect" id="node7" href="corrections_8ino.html#a1d37e842b8cbd7f6e8a9e042a0b28e19" title="correctionCLTadvance" alt="" coords="339,107,493,133"/><area shape="rect" id="node8" href="corrections_8ino.html#a1b4843d731253af035f4e7a5c4e34c97" title="correctionSoftRevLimit" alt="" coords="339,157,493,184"/><area shape="rect" id="node9" href="corrections_8ino.html#ada6c15d9caef9e9f7e266c964e6285f9" title="correctionNitrous" alt="" coords="355,208,477,235"/><area shape="rect" id="node10" href="corrections_8ino.html#a686340f126b1f80039d49a7be18673c4" title="correctionSoftLaunch" alt="" coords="343,259,489,285"/><area shape="rect" id="node11" href="corrections_8ino.html#acc36e137b072c1eeb0d0c33cc2b3163e" title="correctionSoftFlatShift" alt="" coords="340,309,492,336"/><area shape="rect" id="node12" href="corrections_8ino.html#a6d2e97d2015b30a6bad1390238e78ab8" title="correctionKnock" alt="" coords="358,360,474,387"/><area shape="rect" id="node13" href="corrections_8ino.html#ae8ecbe20726ff92d5d5a16b8f29f85c5" title="correctionFixedTiming" alt="" coords="341,411,491,437"/><area shape="rect" id="node14" href="corrections_8ino.html#afd681a5985c06751d68a447e5c3b363c" title="correctionCrankingFixedTiming" alt="" coords="315,461,517,488"/><area shape="rect" id="node5" href="table_8h.html#a462f96f099a0c20647d0a29e96e2e80c" title="table2D_getValue" alt="" coords="565,81,691,108"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph.png" border="0" usemap="#speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph" alt=""/></div>
<map name="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph" id="speeduino_8h_a1c8f52de96bd5799f6c766514fd4b52e_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="145,5,191,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8ba3f43b67e5536f763c0911c2de0d84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte getVE </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lookup the current VE value from the primary 3D fuel map. The Y axis value used for this lookup varies based on the fuel algorithm selected (speed density, alpha-n etc) </p>
<dl class="section return"><dt>Returns</dt><dd>byte The current VE value </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_cgraph.png" border="0" usemap="#speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_cgraph" alt=""/></div>
<map name="speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_cgraph" id="speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_cgraph">
<area shape="rect" id="node2" href="table_8h.html#abcb4d91b651f8d47cbaae711ed938a0f" title="get3DTableValue" alt="" coords="112,5,235,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_icgraph.png" border="0" usemap="#speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_icgraph" alt=""/></div>
<map name="speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_icgraph" id="speeduino_8h_a8ba3f43b67e5536f763c0911c2de0d84_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="113,5,159,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aea6e20ae30e4d32ea2528cd270053183"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t PW </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>REQ_FUEL</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>VE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>corrections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>injOpen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates the required pulsewidth time (in us) given the current system state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">REQ_FUEL</td><td>The required fuel value in uS, as calculated by TunerStudio </td></tr>
    <tr><td class="paramname">VE</td><td>Lookup from the main fuel table. This can either have been MAP or TPS based, depending on the algorithm used </td></tr>
    <tr><td class="paramname">MAP</td><td>In KPa, read from the sensor (This is used when performing a multiply of the map only. It is applicable in both Speed density and Alpha-N) </td></tr>
    <tr><td class="paramname">corrections</td><td>Sum of Enrichment factors (Cold start, acceleration). This is a multiplication factor (Eg to add 10%, this should be 110) </td></tr>
    <tr><td class="paramname">injOpen</td><td>Injector opening time. The time the injector take to open minus the time it takes to close (Both in uS) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint16_t The injector pulse width in uS </dd></dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="speeduino_8h_aea6e20ae30e4d32ea2528cd270053183_icgraph.png" border="0" usemap="#speeduino_8h_aea6e20ae30e4d32ea2528cd270053183_icgraph" alt=""/></div>
<map name="speeduino_8h_aea6e20ae30e4d32ea2528cd270053183_icgraph" id="speeduino_8h_aea6e20ae30e4d32ea2528cd270053183_icgraph">
<area shape="rect" id="node2" href="speeduino_8ino.html#afe461d27b9c48d5921c00d521181f12f" title="loop" alt="" coords="99,5,146,32"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ab880d79dd5fd0910fe0f4b9622b38c77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel1IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 1 is at TDC (This is obviously 0 for virtually ALL engines, but there's some weird ones) </p>

</div>
</div>
<a class="anchor" id="aa63ba1f24a7d0fbd41b11090f555223a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel1InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 1 is at TDC (This is obviously 0 for virtually ALL engines, but there's some weird ones) </p>

</div>
</div>
<a class="anchor" id="a8c16e7f7ebef248fd62553b93a1171b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel2IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 2 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a class="anchor" id="a4beaec077a29c81e425b84919adb2b2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel2InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 2 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a class="anchor" id="adb97dd392b46ed7c5a1a435d55eac055"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel3IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 3 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a class="anchor" id="ab20a8028d46b0c4c51d52f0a921e777b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel3InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 3 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a class="anchor" id="a0f79169133ff0f3d42a6d5b93a9e97b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel4IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 4 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a class="anchor" id="a9cae413bf7f144ec4ead99fb0e2c6d26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel4InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 4 (and 5/6/7/8) is at TDC </p>

</div>
</div>
<a class="anchor" id="a3e1339d4ac180ccd6f9cc7563a41d522"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel5IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 5 is at TDC </p>

</div>
</div>
<a class="anchor" id="a45f910546354fd16fb3bc0d3f65c8818"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel5InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 5 is at TDC </p>

</div>
</div>
<a class="anchor" id="a3e1aec68719a59c62da3e0554758a08f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel6IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 6 is at TDC </p>

</div>
</div>
<a class="anchor" id="adfb485b51b3f0b51254077751ffad48d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel6InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 6 is at TDC </p>

</div>
</div>
<a class="anchor" id="ab3d37a88ef2039ecb52029f37ac6b599"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel7IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 7 is at TDC </p>

</div>
</div>
<a class="anchor" id="a34332292b05884e30d43230529428a4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel7InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 7 is at TDC </p>

</div>
</div>
<a class="anchor" id="a2d7e1863a4c5ebf361cc92fbdfb53add"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel8IgnDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 8 is at TDC </p>

</div>
</div>
<a class="anchor" id="a693849a31b96f9b6dfc991cf744caf1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel8InjDegrees</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of crank degrees until cylinder 8 is at TDC </p>

</div>
</div>
<a class="anchor" id="a25dec7d77cf1c281884f4215ad9fc4b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte cltCalibrationTable[<a class="el" href="globals_8h.html#ae6818c8663b6e1efdd2cacbabf810c2c">CALIBRATION_TABLE_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An array containing the coolant sensor calibration values </p>

</div>
</div>
<a class="anchor" id="a9037f3992577af52afcf85002e9f4dd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconfig10.html">config10</a> configPage10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="add94b67c28e6368081a7f29347e363e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconfig2.html">config2</a> configPage2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae9d7b69a1e7d27adece4758473af80af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconfig4.html">config4</a> configPage4</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad2eb2083468e98f610294cd25458f578"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconfig6.html">config6</a> configPage6</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaeee1f66f241f5b98ce64b8790121b89"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconfig9.html">config9</a> configPage9</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a45ad906e34abe5d3fd7f7f628110fbe5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long currentLoopTime</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The time the current loop started (uS) </p>

</div>
</div>
<a class="anchor" id="a863f675bd344892b5d38d7406ed771ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte curRollingCut = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rolling rev limiter, current ignition channel being cut </p>

</div>
</div>
<a class="anchor" id="a49abe9dbfb79ad17c395ba783ed7d5c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fuelOn = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current state of the fuel system (on or off) </p>

</div>
</div>
<a class="anchor" id="abc3528ba8aa0afcfaa14653df9e72781"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte iatCalibrationTable[<a class="el" href="globals_8h.html#ae6818c8663b6e1efdd2cacbabf810c2c">CALIBRATION_TABLE_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An array containing the inlet air temperature sensor calibration values </p>

</div>
</div>
<a class="anchor" id="a6ecf7ff00301b5b9945dd10e0a0ea60a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign1EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae7ee008323b50e326396f991521bae59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign1StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab26652fbb1f7ab7d92c3b44a7edb4e5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign2EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaab81432a945abc54f80bd4954da1a59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign2StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="addfecce63df5e92a3677a74def256c42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign3EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8eb467a2d0bd33f646d3dddd57d1956d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign3StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1e5d89f65ec3048308c10dc4a17dc55b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign4EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0d2c01daa1d110a8f4b82fd83afd7ed2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign4StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a65ce1ee3bbe4152e0bc041ba522ae5a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign5EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a663fff96ef6b34fc02ba065bec994959"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign5StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a894d94233309345c03cf63ba830188d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign6EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a36b744a54a0ddcd8f9c28ec212bcbe7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign6StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ade7cbf3d916b93038cd7b859d107506f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign7EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a50bb31a754eb62acbfb87b2f3923c4ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign7StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7f16b66cd42e9db46157e7455679ca11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign8EndFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab915c49c19de8d7babfa0f1ac2569ccc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* ign8StartFunction)()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8aafcf78935efa6ebf3ce8bfe8896fa6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ignitionOn = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current state of the ignition system (on or off) </p>

</div>
</div>
<a class="anchor" id="a52a23209328b74a1dc9b80349cfc4983"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t inj_opentime_uS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The injector opening time. This is set within Tuner Studio, but stored here in uS rather than mS </p>

</div>
</div>
<a class="anchor" id="a1d3a1d534af373ecd48c98ddf4774de1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte maxIgnOutputs = 1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used for rolling rev limiter to indicate how many total ignition channels should currently be firing </p>

</div>
</div>
<a class="anchor" id="a1e0c14f053668dce5a7474df6a3199c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte o2CalibrationTable[<a class="el" href="globals_8h.html#ae6818c8663b6e1efdd2cacbabf810c2c">CALIBRATION_TABLE_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An array containing the O2 sensor calibration values </p>

</div>
</div>
<a class="anchor" id="a8c1270967c0f23dcc46f4ff54808795c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long previousLoopTime</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The time the previous loop started (uS) </p>

</div>
</div>
<a class="anchor" id="a3b20dbd79052be063c030cbe38344b94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t req_fuel_uS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The required fuel variable (As calculated by TunerStudio) in uS </p>

</div>
</div>
<a class="anchor" id="abbc82bbfca4938d905e62e04dd74b6aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte rollingCutCounter = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>how many times (revolutions) the ignition has been cut in a row </p>

</div>
</div>
<a class="anchor" id="af66793f211884912e6ad8a7df795dc01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rollingCutLastRev = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tracks whether we're on the same or a different rev for the rolling cut </p>

</div>
</div>
<a class="anchor" id="a13ef012561cb22a327fee50ef10555f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t staged_req_fuel_mult_pri</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a893db7275843064fb9d10a3fc2d61ab6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t staged_req_fuel_mult_sec</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
