<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Speeduino: speeduino/storage_api.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="speeduino_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Speeduino
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9dd927a2de2c3597e2b3a7dd174a4cd6.html">speeduino</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">storage_api.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="storage__api_8h_source.html">storage_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="board__definition_8h_source.html">board_definition.h</a>&quot;</code><br />
<code>#include &lt;EEPROM_LIB_H&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespace_e_e_p_r_o_m_api" id="r_namespace_e_e_p_r_o_m_api"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_e_e_p_r_o_m_api.html">EEPROMApi</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a857b4d2cdfc96a80551050f2b0d3af1f" id="r_a857b4d2cdfc96a80551050f2b0d3af1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">static</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_e_e_p_r_o_m_api.html#a857b4d2cdfc96a80551050f2b0d3af1f">EEPROMApi::read</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> address)</td></tr>
<tr class="separator:a857b4d2cdfc96a80551050f2b0d3af1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a283b5e6be3bdee55d445684e7dd0b20f" id="r_a283b5e6be3bdee55d445684e7dd0b20f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">static</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_e_e_p_r_o_m_api.html#a283b5e6be3bdee55d445684e7dd0b20f">EEPROMApi::write</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> address, <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">val</a>)</td></tr>
<tr class="separator:a283b5e6be3bdee55d445684e7dd0b20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71278118565dc60e2edcdfbe87338b2" id="r_aa71278118565dc60e2edcdfbe87338b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">static</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_e_e_p_r_o_m_api.html#aa71278118565dc60e2edcdfbe87338b2">EEPROMApi::length</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a>)</td></tr>
<tr class="separator:aa71278118565dc60e2edcdfbe87338b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a830b3719e6e91af9ba13aac332814792" id="r_a830b3719e6e91af9ba13aac332814792"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structstorage__api__t.html">storage_api_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage__api_8cpp.html#a830b3719e6e91af9ba13aac332814792">getEEPROMStorageApi</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a>)</td></tr>
<tr class="memdesc:a830b3719e6e91af9ba13aac332814792"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="structstorage__api__t.html" title="The external storage API. This must be supported by any storage system. E.g. EEPROM,...">storage_api_t</a> instance that wraps <a class="el" href="board__definition_8h.html#ab18172ca7d251f047c74b7f5103f3b4c" title="Access the EEPROM singleton.">getEEPROM()</a>  <br /></td></tr>
<tr class="separator:a830b3719e6e91af9ba13aac332814792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a573585a4bfa716970289cff4af01c4d8" id="r_a573585a4bfa716970289cff4af01c4d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage__api_8cpp.html#a573585a4bfa716970289cff4af01c4d8">update</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">api</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> address, <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">value</a>)</td></tr>
<tr class="memdesc:a573585a4bfa716970289cff4af01c4d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conditionally write a byte to storage if it differs from the one already saved.  <br /></td></tr>
<tr class="separator:a573585a4bfa716970289cff4af01c4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79469409af4199c4e1f1345c5703b29" id="r_ad79469409af4199c4e1f1345c5703b29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage__api_8cpp.html#ad79469409af4199c4e1f1345c5703b29">updateBlock</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">api</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> address, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">pFirst</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">pLast</a>)</td></tr>
<tr class="memdesc:ad79469409af4199c4e1f1345c5703b29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conditionally write bytes from block of memory to storage. Values are written only if they differ from the one already saved at the same address.  <br /></td></tr>
<tr class="separator:ad79469409af4199c4e1f1345c5703b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ce1aaf4c1b83189861a975b756ef67" id="r_a32ce1aaf4c1b83189861a975b756ef67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage__api_8cpp.html#a32ce1aaf4c1b83189861a975b756ef67">updateBlockLimitWriteOps</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">api</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> address, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">pFirst</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">pLast</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">maxWrites</a>)</td></tr>
<tr class="memdesc:a32ce1aaf4c1b83189861a975b756ef67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conditionally write bytes from block of memory to storage, with a limited number of write operations.  <br /></td></tr>
<tr class="separator:a32ce1aaf4c1b83189861a975b756ef67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37d57ac963f734779bd2d466e89c5bb" id="r_af37d57ac963f734779bd2d466e89c5bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage__api_8cpp.html#af37d57ac963f734779bd2d466e89c5bb">loadBlock</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">api</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">int16_t</a> address, <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">pFirst</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">pLast</a>)</td></tr>
<tr class="memdesc:af37d57ac963f734779bd2d466e89c5bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy a block of data from storage to memory.  <br /></td></tr>
<tr class="separator:af37d57ac963f734779bd2d466e89c5bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa37c650a553c4e527213fcb38403ab" id="r_adfa37c650a553c4e527213fcb38403ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage__api_8cpp.html#adfa37c650a553c4e527213fcb38403ab">fillBlock</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">api</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> address, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> length, <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">value</a>)</td></tr>
<tr class="memdesc:adfa37c650a553c4e527213fcb38403ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills the given block with a constant.  <br /></td></tr>
<tr class="separator:adfa37c650a553c4e527213fcb38403ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40633796965b21ccf3eebb73990bf4a9" id="r_a40633796965b21ccf3eebb73990bf4a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage__api_8cpp.html#a40633796965b21ccf3eebb73990bf4a9">moveBlock</a> (<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;<a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">api</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">dest</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">source</a>, <a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> size)</td></tr>
<tr class="memdesc:a40633796965b21ccf3eebb73990bf4a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move a block of bytes.  <br /></td></tr>
<tr class="separator:a40633796965b21ccf3eebb73990bf4a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="adfa37c650a553c4e527213fcb38403ab" name="adfa37c650a553c4e527213fcb38403ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa37c650a553c4e527213fcb38403ab">&#9670;&#160;</a></span>fillBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a> fillBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fills the given block with a constant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">api</td><td>Raw storage API </td></tr>
    <tr><td class="paramname">address</td><td>the location to begin writing to (zero based) </td></tr>
    <tr><td class="paramname">length</td><td>number of <em>bytes</em> to write </td></tr>
    <tr><td class="paramname">value</td><td>fill value </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_cgraph.png" border="0" usemap="#astorage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_cgraph" alt=""/></div>
<map name="astorage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_cgraph" id="astorage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_cgraph">
<area shape="rect" title="Fills the given block with a constant." alt="" coords="5,5,72,31"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f" title="Reads an integral type, timing out if necessary." alt="" coords="228,5,397,31"/>
<area shape="poly" title=" " alt="" coords="72,16,212,16,212,21,72,21"/>
<area shape="rect" href="storage__api_8cpp.html#a573585a4bfa716970289cff4af01c4d8" title="Conditionally write a byte to storage if it differs from the one already saved." alt="" coords="120,31,180,56"/>
<area shape="poly" title=" " alt="" coords="72,23,105,31,104,36,71,28"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gac5cac0fcdb201602960f6610b20a1f92" title="Has the current receive operation timed out?" alt="" coords="620,5,713,31"/>
<area shape="poly" title=" " alt="" coords="398,16,604,16,604,21,398,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga5370e4e80f694b4f34babb7335fbae52" title="Read from the serial port into the supplied buffer." alt="" coords="445,31,572,56"/>
<area shape="poly" title=" " alt="" coords="398,26,430,31,429,36,397,32"/>
<area shape="poly" title=" " alt="" coords="572,31,604,25,604,31,572,36"/>
<area shape="poly" title=" " alt="" coords="180,36,212,31,213,36,181,41"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_icgraph.png" border="0" usemap="#astorage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_icgraph" alt=""/></div>
<map name="astorage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_icgraph" id="astorage__api_8cpp_adfa37c650a553c4e527213fcb38403ab_icgraph">
<area shape="rect" title="Fills the given block with a constant." alt="" coords="480,5,547,31"/>
<area shape="rect" href="init_8cpp.html#a0e59a414c285af1419e224813d7585ba" title="Allow the user to reset the firmware storage (aka EPROM)." alt="" coords="238,5,432,31"/>
<area shape="poly" title=" " alt="" coords="465,21,433,21,433,16,465,16"/>
<area shape="rect" href="init_8cpp.html#adb296edeed2f9690941f64a06def7ec8" title=" " alt="" coords="107,5,190,31"/>
<area shape="poly" title=" " alt="" coords="222,21,191,21,191,16,222,16"/>
<area shape="rect" href="speeduino_8ino.html#a7dfd9b79bc5a37d7df40207afbc5431f" title=" " alt="" coords="5,5,59,31"/>
<area shape="poly" title=" " alt="" coords="91,21,59,21,59,16,91,16"/>
</map>
</div>

</div>
</div>
<a id="a830b3719e6e91af9ba13aac332814792" name="a830b3719e6e91af9ba13aac332814792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a830b3719e6e91af9ba13aac332814792">&#9670;&#160;</a></span>getEEPROMStorageApi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structstorage__api__t.html">storage_api_t</a> getEEPROMStorageApi </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="structstorage__api__t.html" title="The external storage API. This must be supported by any storage system. E.g. EEPROM,...">storage_api_t</a> instance that wraps <a class="el" href="board__definition_8h.html#ab18172ca7d251f047c74b7f5103f3b4c" title="Access the EEPROM singleton.">getEEPROM()</a> </p>
<p>Applies the adapter pattern to provide <a class="el" href="structstorage__api__t.html" title="The external storage API. This must be supported by any storage system. E.g. EEPROM,...">storage_api_t</a> from EEPROM_t </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_a830b3719e6e91af9ba13aac332814792_cgraph.png" border="0" usemap="#astorage__api_8cpp_a830b3719e6e91af9ba13aac332814792_cgraph" alt=""/></div>
<map name="astorage__api_8cpp_a830b3719e6e91af9ba13aac332814792_cgraph" id="astorage__api_8cpp_a830b3719e6e91af9ba13aac332814792_cgraph">
<area shape="rect" title="Create a storage_api_t instance that wraps getEEPROM()" alt="" coords="5,80,164,106"/>
<area shape="rect" href="board__definition_8h.html#a612acdf054430582ede36c0d5f8dd346" title="The maximum number of write operations that will be performed in one go." alt="" coords="212,5,383,31"/>
<area shape="poly" title=" " alt="" coords="116,77,211,40,230,33,232,38,213,45,117,82"/>
<area shape="rect" href="namespace_e_e_p_r_o_m_api.html#aa71278118565dc60e2edcdfbe87338b2" title=" " alt="" coords="229,55,366,80"/>
<area shape="poly" title=" " alt="" coords="164,81,214,75,214,80,164,86"/>
<area shape="rect" href="namespace_e_e_p_r_o_m_api.html#a857b4d2cdfc96a80551050f2b0d3af1f" title=" " alt="" coords="234,104,361,130"/>
<area shape="poly" title=" " alt="" coords="164,99,220,105,219,111,164,104"/>
<area shape="rect" href="namespace_e_e_p_r_o_m_api.html#a283b5e6be3bdee55d445684e7dd0b20f" title=" " alt="" coords="233,153,362,179"/>
<area shape="poly" title=" " alt="" coords="119,104,213,140,232,146,231,151,211,145,117,109"/>
<area shape="rect" href="board__definition_8h.html#ab18172ca7d251f047c74b7f5103f3b4c" title="Access the EEPROM singleton." alt="" coords="469,104,563,130"/>
<area shape="poly" title=" " alt="" coords="358,78,454,100,453,106,357,84"/>
<area shape="poly" title=" " alt="" coords="361,114,453,114,453,120,361,120"/>
<area shape="poly" title=" " alt="" coords="357,150,453,128,454,133,358,155"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f" title="Reads an integral type, timing out if necessary." alt="" coords="431,153,600,179"/>
<area shape="poly" title=" " alt="" coords="362,164,415,164,415,169,362,169"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gac5cac0fcdb201602960f6610b20a1f92" title="Has the current receive operation timed out?" alt="" coords="823,153,916,179"/>
<area shape="poly" title=" " alt="" coords="601,164,807,164,807,169,601,169"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga5370e4e80f694b4f34babb7335fbae52" title="Read from the serial port into the supplied buffer." alt="" coords="648,179,775,204"/>
<area shape="poly" title=" " alt="" coords="601,174,633,179,632,184,600,180"/>
<area shape="poly" title=" " alt="" coords="775,179,807,173,807,179,775,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_a830b3719e6e91af9ba13aac332814792_icgraph.png" border="0" usemap="#astorage__api_8cpp_a830b3719e6e91af9ba13aac332814792_icgraph" alt=""/></div>
<map name="astorage__api_8cpp_a830b3719e6e91af9ba13aac332814792_icgraph" id="astorage__api_8cpp_a830b3719e6e91af9ba13aac332814792_icgraph">
<area shape="rect" title="Create a storage_api_t instance that wraps getEEPROM()" alt="" coords="238,5,396,31"/>
<area shape="rect" href="init_8cpp.html#adb296edeed2f9690941f64a06def7ec8" title=" " alt="" coords="107,5,190,31"/>
<area shape="poly" title=" " alt="" coords="222,21,190,21,190,16,222,16"/>
<area shape="rect" href="speeduino_8ino.html#a7dfd9b79bc5a37d7df40207afbc5431f" title=" " alt="" coords="5,5,59,31"/>
<area shape="poly" title=" " alt="" coords="91,21,59,21,59,16,91,16"/>
</map>
</div>

</div>
</div>
<a id="af37d57ac963f734779bd2d466e89c5bb" name="af37d57ac963f734779bd2d466e89c5bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37d57ac963f734779bd2d466e89c5bb">&#9670;&#160;</a></span>loadBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> loadBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">int16_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *&#160;</td>
          <td class="paramname"><em>pFirst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *&#160;</td>
          <td class="paramname"><em>pLast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy a block of data from storage to memory. </p>
<p>This is essentially the opposite of <a class="el" href="storage__api_8h.html#ad79469409af4199c4e1f1345c5703b29" title="Conditionally write bytes from block of memory to storage. Values are written only if they differ fro...">updateBlock()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">api</td><td>Raw storage API </td></tr>
    <tr><td class="paramname">address</td><td>the location to begin reading from (zero based) </td></tr>
    <tr><td class="paramname">pFirst</td><td>Points to the start of the memory block </td></tr>
    <tr><td class="paramname">pLast</td><td>Points to one byte past the end of the block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint16_t The storage address of pLast. Convenient for chaining calls. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_cgraph.png" border="0" usemap="#astorage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_cgraph" alt=""/></div>
<map name="astorage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_cgraph" id="astorage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_cgraph">
<area shape="rect" title="Copy a block of data from storage to memory." alt="" coords="5,5,84,31"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f" title="Reads an integral type, timing out if necessary." alt="" coords="132,5,301,31"/>
<area shape="poly" title=" " alt="" coords="84,16,116,16,116,21,84,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gac5cac0fcdb201602960f6610b20a1f92" title="Has the current receive operation timed out?" alt="" coords="523,5,617,31"/>
<area shape="poly" title=" " alt="" coords="301,16,507,16,507,21,301,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga5370e4e80f694b4f34babb7335fbae52" title="Read from the serial port into the supplied buffer." alt="" coords="349,31,475,56"/>
<area shape="poly" title=" " alt="" coords="302,26,334,31,333,36,301,32"/>
<area shape="poly" title=" " alt="" coords="475,31,507,25,508,31,476,36"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_icgraph.png" border="0" usemap="#astorage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_icgraph" alt=""/></div>
<map name="astorage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_icgraph" id="astorage__api_8cpp_af37d57ac963f734779bd2d466e89c5bb_icgraph">
<area shape="rect" title="Copy a block of data from storage to memory." alt="" coords="1295,131,1373,156"/>
<area shape="rect" href="storage_8cpp.html#ac8d89111a262a9c6b293706ee97686fc" title=" " alt="" coords="1162,105,1247,131"/>
<area shape="poly" title=" " alt="" coords="1279,135,1247,129,1248,124,1280,130"/>
<area shape="rect" href="storage__api_8h.html#ad578878883d8e69777eb1b050ffa25ac" title="Copy a block of data from storage into a POD object." alt="" coords="1163,156,1246,182"/>
<area shape="poly" title=" " alt="" coords="1280,157,1247,163,1246,158,1279,152"/>
<area shape="rect" href="storage_8cpp.html#a000c4c897f467d11e2a816c3ddc3f658" title=" " alt="" coords="1029,55,1074,80"/>
<area shape="poly" title=" " alt="" coords="1148,102,1074,77,1075,72,1150,97"/>
<area shape="rect" href="group__storage-pages.html#gaa0e7f360a239f8398b1a59b25d564833" title="Load all pages from durable storage. I.e. load the tune." alt="" coords="604,80,701,106"/>
<area shape="poly" title=" " alt="" coords="1147,118,702,98,702,92,1147,113"/>
<area shape="rect" href="storage_8cpp.html#ac4b431ffaf304d3d451793520930c4a8" title=" " alt="" coords="838,5,883,31"/>
<area shape="poly" title=" " alt="" coords="1013,60,883,26,884,21,1014,55"/>
<area shape="rect" href="storage_8cpp.html#a680ffe510f38e2290bd6e9e8ab9bed4a" title=" " alt="" coords="822,55,899,80"/>
<area shape="poly" title=" " alt="" coords="1013,70,899,70,899,65,1013,65"/>
<area shape="poly" title=" " alt="" coords="807,77,702,90,701,84,806,71"/>
<area shape="rect" href="updates_8cpp.html#a719c025633fab0a1e49d6ec192c1c6bb" title=" " alt="" coords="402,55,486,80"/>
<area shape="poly" title=" " alt="" coords="588,88,486,75,487,70,589,82"/>
<area shape="rect" href="init_8cpp.html#adb296edeed2f9690941f64a06def7ec8" title=" " alt="" coords="170,105,253,131"/>
<area shape="poly" title=" " alt="" coords="588,99,253,118,253,113,588,94"/>
<area shape="poly" title=" " alt="" coords="388,82,254,112,253,107,387,77"/>
<area shape="rect" href="speeduino_8ino.html#a7dfd9b79bc5a37d7df40207afbc5431f" title=" " alt="" coords="5,105,59,131"/>
<area shape="poly" title=" " alt="" coords="154,121,59,121,59,116,154,116"/>
<area shape="rect" href="group__storage-calibration-tables.html#ga05be6c390d80f4f44a819f42b2df87ef" title="Load the curves for all sensors from durable storage." alt="" coords="572,156,733,182"/>
<area shape="poly" title=" " alt="" coords="1148,172,733,172,733,166,1148,166"/>
<area shape="rect" href="group__storage-calibration-tables.html#gae9718695460cc4fefe0c0a9ff1c8eea1" title="Retrieve the CRC for one sensor curve from durable storage." alt="" coords="988,207,1114,232"/>
<area shape="poly" title=" " alt="" coords="1150,190,1093,209,1091,204,1148,185"/>
<area shape="poly" title=" " alt="" coords="557,161,253,126,254,120,557,155"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gad3f266b2b216f7b2b7b3d08dd3661b6c" title="Processes a message once it has been fully received." alt="" coords="781,207,940,232"/>
<area shape="poly" title=" " alt="" coords="973,222,941,222,941,217,973,217"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga7e59b4f0d357a308ac2f7257cca678e1" title="The serial receive pump. Should be called whenever the serial port has data available to read." alt="" coords="603,207,702,232"/>
<area shape="poly" title=" " alt="" coords="765,222,702,222,702,217,765,217"/>
<area shape="rect" href="speeduino_8ino.html#aab2144d627465c54a1edaaf228daf884" title=" " alt="" coords="107,232,316,258"/>
<area shape="poly" title=" " alt="" coords="587,226,316,242,316,236,587,221"/>
<area shape="rect" href="comms__secondary_8cpp.html#a7c6918eaefbe2574c2a1133062129633" title=" " alt="" coords="364,257,524,283"/>
<area shape="poly" title=" " alt="" coords="588,238,501,259,499,254,587,233"/>
<area shape="poly" title=" " alt="" coords="348,262,316,259,317,254,349,257"/>
</map>
</div>

</div>
</div>
<a id="a40633796965b21ccf3eebb73990bf4a9" name="a40633796965b21ccf3eebb73990bf4a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40633796965b21ccf3eebb73990bf4a9">&#9670;&#160;</a></span>moveBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a> moveBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move a block of bytes. </p>
<p>This will handle overlapping blocks. I.e. if [dest, size) overlaps [source, size)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">api</td><td>Raw storage API </td></tr>
    <tr><td class="paramname">dest</td><td>Address to copy <em>to</em> </td></tr>
    <tr><td class="paramname">source</td><td>Address to copy <em>from</em> </td></tr>
    <tr><td class="paramname">size</td><td>number of bytes to copy </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_a40633796965b21ccf3eebb73990bf4a9_cgraph.png" border="0" usemap="#astorage__api_8cpp_a40633796965b21ccf3eebb73990bf4a9_cgraph" alt=""/></div>
<map name="astorage__api_8cpp_a40633796965b21ccf3eebb73990bf4a9_cgraph" id="astorage__api_8cpp_a40633796965b21ccf3eebb73990bf4a9_cgraph">
<area shape="rect" title="Move a block of bytes." alt="" coords="5,5,92,31"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f" title="Reads an integral type, timing out if necessary." alt="" coords="248,5,417,31"/>
<area shape="poly" title=" " alt="" coords="92,16,232,16,232,21,92,21"/>
<area shape="rect" href="storage__api_8cpp.html#a573585a4bfa716970289cff4af01c4d8" title="Conditionally write a byte to storage if it differs from the one already saved." alt="" coords="140,31,200,56"/>
<area shape="poly" title=" " alt="" coords="93,25,125,31,124,37,91,30"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gac5cac0fcdb201602960f6610b20a1f92" title="Has the current receive operation timed out?" alt="" coords="640,5,733,31"/>
<area shape="poly" title=" " alt="" coords="418,16,624,16,624,21,418,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga5370e4e80f694b4f34babb7335fbae52" title="Read from the serial port into the supplied buffer." alt="" coords="465,31,592,56"/>
<area shape="poly" title=" " alt="" coords="418,26,450,31,449,36,417,32"/>
<area shape="poly" title=" " alt="" coords="592,31,624,25,624,31,592,36"/>
<area shape="poly" title=" " alt="" coords="200,36,232,31,233,36,201,41"/>
</map>
</div>

</div>
</div>
<a id="a573585a4bfa716970289cff4af01c4d8" name="a573585a4bfa716970289cff4af01c4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a573585a4bfa716970289cff4af01c4d8">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">bool</a> update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Conditionally write a byte to storage if it differs from the one already saved. </p>
<p>Background: some storage hardware has a limited number of write cycles per cell. E.g. flash memory can only withstand a certain number of write/erase cycles before it begins to wear out and can no longer reliably store data. This is typically in the range of 3000-5000 cycles for multi-level cell (MLC) NAND flash, or 10,000-100,000 cycles for single-level cell (SLC) NAND flash. So we want to limit writes as much as possible. Hence this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">api</td><td>Raw storage API </td></tr>
    <tr><td class="paramname">address</td><td>the location to write to (zero based) </td></tr>
    <tr><td class="paramname">value</td><td>the value to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the value was written, false otherwise </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_cgraph.png" border="0" usemap="#astorage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_cgraph" alt=""/></div>
<map name="astorage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_cgraph" id="astorage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_cgraph">
<area shape="rect" title="Conditionally write a byte to storage if it differs from the one already saved." alt="" coords="5,5,66,31"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f" title="Reads an integral type, timing out if necessary." alt="" coords="114,5,283,31"/>
<area shape="poly" title=" " alt="" coords="66,16,98,16,98,21,66,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gac5cac0fcdb201602960f6610b20a1f92" title="Has the current receive operation timed out?" alt="" coords="505,5,599,31"/>
<area shape="poly" title=" " alt="" coords="283,16,489,16,489,21,283,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga5370e4e80f694b4f34babb7335fbae52" title="Read from the serial port into the supplied buffer." alt="" coords="331,31,457,56"/>
<area shape="poly" title=" " alt="" coords="284,26,316,31,315,36,283,32"/>
<area shape="poly" title=" " alt="" coords="457,31,489,25,490,31,458,36"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_icgraph.png" border="0" usemap="#astorage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_icgraph" alt=""/></div>
<map name="astorage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_icgraph" id="astorage__api_8cpp_a573585a4bfa716970289cff4af01c4d8_icgraph">
<area shape="rect" title="Conditionally write a byte to storage if it differs from the one already saved." alt="" coords="1911,509,1972,534"/>
<area shape="rect" href="updates_8cpp.html#a719c025633fab0a1e49d6ec192c1c6bb" title=" " alt="" coords="673,458,758,484"/>
<area shape="poly" title=" " alt="" coords="1896,524,1578,524,1213,524,1082,519,953,507,758,480,758,475,954,502,1083,514,1213,519,1578,519,1896,519"/>
<area shape="rect" href="storage__api_8cpp.html#adfa37c650a553c4e527213fcb38403ab" title="Fills the given block with a constant." alt="" coords="1742,609,1808,634"/>
<area shape="poly" title=" " alt="" coords="1923,548,1897,575,1865,600,1837,612,1810,619,1808,614,1835,607,1862,595,1893,571,1919,545"/>
<area shape="rect" href="comms__legacy_8cpp.html#a70fb263f2214d5c61eb49d6f8c33df4f" title=" " alt="" coords="640,57,791,82"/>
<area shape="poly" title=" " alt="" coords="1938,493,1936,432,1926,350,1916,306,1903,263,1885,220,1861,182,1801,103,1772,74,1742,50,1710,31,1672,18,1629,11,1578,8,1213,8,1093,13,974,26,781,58,780,53,973,21,1093,8,1213,3,1578,3,1629,5,1674,13,1712,26,1745,45,1776,70,1805,100,1866,178,1889,218,1908,261,1921,305,1931,349,1941,431,1944,493"/>
<area shape="rect" href="storage__api_8cpp.html#a40633796965b21ccf3eebb73990bf4a9" title="Move a block of bytes." alt="" coords="1732,658,1818,684"/>
<area shape="poly" title=" " alt="" coords="1933,550,1907,600,1888,627,1865,649,1843,661,1819,668,1818,663,1841,656,1862,645,1884,623,1903,598,1928,547"/>
<area shape="rect" href="group__storage-utility.html#gab45d4dbca7c69c481be7250c1188bdea" title="Save/load the version number of the storage layout." alt="" coords="1141,458,1289,484"/>
<area shape="poly" title=" " alt="" coords="1895,512,1863,505,1703,488,1544,478,1289,472,1289,467,1544,472,1704,482,1864,500,1897,506"/>
<area shape="rect" href="group__storage-utility.html#gad1cd3a5d7a5061dc40eef749ee55cfc9" title="Last barometer reading cache." alt="" coords="1724,559,1826,585"/>
<area shape="poly" title=" " alt="" coords="1897,537,1820,561,1819,556,1896,532"/>
<area shape="rect" href="storage__api_8cpp.html#ad79469409af4199c4e1f1345c5703b29" title="Conditionally write bytes from block of memory to storage. Values are written only if they differ fro..." alt="" coords="1530,394,1623,420"/>
<area shape="poly" title=" " alt="" coords="1918,499,1893,475,1862,454,1800,432,1736,418,1674,411,1623,409,1624,403,1675,406,1736,413,1802,427,1865,450,1896,470,1922,495"/>
<area shape="rect" href="storage__api_8cpp.html#a32ce1aaf4c1b83189861a975b756ef67" title="Conditionally write bytes from block of memory to storage, with a limited number of write operations." alt="" coords="1687,193,1863,218"/>
<area shape="poly" title=" " alt="" coords="1924,496,1781,220,1786,217,1929,493"/>
<area shape="rect" href="storage_8cpp.html#ae747ea4be6494a109d22d1bb6e6a95f3" title=" " alt="" coords="1751,707,1800,733"/>
<area shape="poly" title=" " alt="" coords="1938,550,1930,584,1916,624,1894,664,1865,698,1833,715,1801,721,1800,716,1832,710,1862,694,1890,661,1911,622,1925,583,1933,549"/>
<area shape="rect" href="init_8cpp.html#adb296edeed2f9690941f64a06def7ec8" title=" " alt="" coords="479,495,562,521"/>
<area shape="poly" title=" " alt="" coords="659,484,563,503,562,498,658,479"/>
<area shape="rect" href="speeduino_8ino.html#a7dfd9b79bc5a37d7df40207afbc5431f" title=" " alt="" coords="316,495,370,521"/>
<area shape="poly" title=" " alt="" coords="463,511,370,511,370,505,463,505"/>
<area shape="rect" href="init_8cpp.html#a0e59a414c285af1419e224813d7585ba" title="Allow the user to reset the firmware storage (aka EPROM)." alt="" coords="618,634,813,660"/>
<area shape="poly" title=" " alt="" coords="1727,635,1589,661,1504,672,1418,676,1213,676,998,670,813,658,813,652,999,664,1213,671,1418,671,1504,666,1589,656,1726,630"/>
<area shape="poly" title=" " alt="" coords="682,627,539,524,542,519,685,623"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga7e59b4f0d357a308ac2f7257cca678e1" title="The serial receive pump. Should be called whenever the serial port has data available to read." alt="" coords="471,82,570,108"/>
<area shape="poly" title=" " alt="" coords="625,84,571,91,570,86,625,78"/>
<area shape="rect" href="speeduino_8ino.html#aab2144d627465c54a1edaaf228daf884" title=" " alt="" coords="5,106,215,132"/>
<area shape="poly" title=" " alt="" coords="456,96,423,96,343,94,263,96,178,108,177,103,262,91,343,88,423,91,456,91"/>
<area shape="rect" href="comms__secondary_8cpp.html#a7c6918eaefbe2574c2a1133062129633" title=" " alt="" coords="263,106,423,132"/>
<area shape="poly" title=" " alt="" coords="456,106,424,110,423,105,455,101"/>
<area shape="poly" title=" " alt="" coords="247,121,215,121,215,116,247,116"/>
<area shape="poly" title=" " alt="" coords="1125,473,758,473,758,468,1125,468"/>
<area shape="rect" href="sensors_8cpp.html#a6b6a51ab58ee438f5afb6edaedd855bb" title=" " alt="" coords="1514,559,1639,585"/>
<area shape="poly" title=" " alt="" coords="1709,575,1640,575,1640,569,1709,569"/>
<area shape="rect" href="sensors_8cpp.html#a4b53e9861e65133c0b4d0165051740cd" title="Initialize the MAP calculation &amp; Baro values." alt="" coords="653,533,778,558"/>
<area shape="poly" title=" " alt="" coords="1498,572,778,550,778,545,1498,567"/>
<area shape="rect" href="sensors_8cpp.html#ae558168b1e1112cfd51521ae11cb3b23" title=" " alt="" coords="1380,610,1453,636"/>
<area shape="poly" title=" " alt="" coords="1520,593,1454,614,1453,609,1518,588"/>
<area shape="poly" title=" " alt="" coords="637,533,562,519,563,513,639,528"/>
<area shape="rect" href="sensors_8cpp.html#a8b017fd1fb806d6c5afdd35ba6d68cc4" title=" " alt="" coords="1110,610,1319,636"/>
<area shape="poly" title=" " alt="" coords="1364,625,1320,625,1320,620,1364,620"/>
<area shape="rect" href="storage__api_8h.html#a39e71c020e9c61aa672e11059bbeefd6" title="Conditionally write bytes from a POD object to storage. Values are written only if they differ from t..." alt="" coords="1367,370,1466,396"/>
<area shape="poly" title=" " alt="" coords="1514,400,1466,393,1467,387,1515,395"/>
<area shape="rect" href="group__storage-calibration-tables.html#gaa488a262511ec237080221b99ff812f0" title="Store the CRC for one sensor curve in durable storage." alt="" coords="1150,321,1280,346"/>
<area shape="poly" title=" " alt="" coords="1352,368,1319,360,1274,349,1276,344,1320,355,1353,363"/>
<area shape="rect" href="group__storage-calibration-tables.html#ga406e39fadb4e9b3567b1769b2c172358" title="Store one sensor curve in durable storage." alt="" coords="1144,370,1286,396"/>
<area shape="poly" title=" " alt="" coords="1352,385,1286,385,1286,380,1352,380"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaf5b4ef8e0caf756c612a3bd48539556e" title="Update the oxygen sensor table from serialPayload." alt="" coords="881,358,1042,384"/>
<area shape="poly" title=" " alt="" coords="1135,348,1043,361,1042,356,1134,342"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gad58168d3dce22363cca07f6b43a9c898" title="Update a temperature calibration table from serialPayload." alt="" coords="861,293,1062,334"/>
<area shape="poly" title=" " alt="" coords="1135,330,1062,324,1063,319,1135,324"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gad3f266b2b216f7b2b7b3d08dd3661b6c" title="Processes a message once it has been fully received." alt="" coords="636,231,795,257"/>
<area shape="poly" title=" " alt="" coords="878,355,860,348,821,327,785,303,730,259,733,255,788,298,824,322,862,343,880,350"/>
<area shape="poly" title=" " alt="" coords="684,224,538,110,541,106,687,219"/>
<area shape="poly" title=" " alt="" coords="871,291,763,260,765,255,872,286"/>
<area shape="poly" title=" " alt="" coords="1128,381,1042,377,1042,372,1128,376"/>
<area shape="poly" title=" " alt="" coords="1137,368,1109,361,1027,337,1028,332,1111,356,1139,363"/>
<area shape="rect" href="group__storage-calibration-tables.html#ga9e9b873a9688cb0ea4ccada839c8192b" title="Store the curves for all sensors in durable storage." alt="" coords="879,407,1044,433"/>
<area shape="poly" title=" " alt="" coords="1128,398,1045,411,1044,405,1127,393"/>
<area shape="poly" title=" " alt="" coords="881,439,759,465,758,459,880,434"/>
<area shape="rect" href="storage_8cpp.html#a1b9967f37ccf7c7e53c0465fdb3b1b47" title=" " alt="" coords="1552,193,1601,218"/>
<area shape="poly" title=" " alt="" coords="1672,208,1602,208,1602,203,1672,203"/>
<area shape="rect" href="storage_8cpp.html#acf75cd7cd16c60e69e7b81ab616d99a8" title=" " alt="" coords="1532,118,1621,144"/>
<area shape="poly" title=" " alt="" coords="1724,189,1612,147,1614,142,1726,184"/>
<area shape="poly" title=" " alt="" coords="1537,219,1466,233,1278,249,1091,255,924,255,795,251,795,245,924,249,1091,250,1278,244,1465,228,1536,214"/>
<area shape="rect" href="storage_8cpp.html#ac9d49faffe70e707152dc88e3b4c2ac4" title=" " alt="" coords="1392,143,1441,169"/>
<area shape="poly" title=" " alt="" coords="1536,196,1441,166,1442,161,1537,191"/>
<area shape="rect" href="storage_8cpp.html#a3d7868d131d0ebc01e92ce50476e9b9e" title=" " alt="" coords="1376,193,1457,218"/>
<area shape="poly" title=" " alt="" coords="1536,208,1457,208,1457,203,1536,203"/>
<area shape="rect" href="group__storage-pages.html#ga7b9e369396806ef1d65673b569b7d273" title="Write one page from RAM to durable storage." alt="" coords="1175,119,1254,145"/>
<area shape="poly" title=" " alt="" coords="1363,189,1252,148,1254,143,1365,184"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gae66e8182a3ace437a194321fef590ea3" title=" " alt="" coords="905,193,1018,218"/>
<area shape="poly" title=" " alt="" coords="1161,153,1063,184,1019,195,1017,190,1061,179,1160,148"/>
<area shape="rect" href="sensors_8cpp.html#abb332d81410220fa4639b4b31816b1c7" title=" " alt="" coords="668,106,763,132"/>
<area shape="poly" title=" " alt="" coords="1168,115,1117,98,1062,84,1006,76,962,74,861,84,837,90,813,97,764,110,763,105,812,92,836,84,860,79,961,69,1006,71,1062,79,1119,92,1170,110"/>
<area shape="rect" href="group__storage-pages.html#ga29b75dec198b3e128a7b39d83666d058" title="Write all pages from RAM to durable storage." alt="" coords="911,143,1012,169"/>
<area shape="poly" title=" " alt="" coords="1160,140,1013,154,1012,149,1159,134"/>
<area shape="rect" href="_t_s___command_button_handler_8cpp.html#a1d5b41f39bf9439c1cb139a2bb27f225" title=" " alt="" coords="864,94,1059,120"/>
<area shape="poly" title=" " alt="" coords="1159,129,1058,119,1059,114,1160,124"/>
<area shape="poly" title=" " alt="" coords="890,219,796,234,795,229,890,214"/>
<area shape="poly" title=" " alt="" coords="688,144,653,178,621,220,582,298,555,378,536,448,527,496,522,494,531,447,550,377,578,296,616,217,649,174,684,140"/>
<area shape="poly" title=" " alt="" coords="897,165,878,172,863,182,840,221,799,303,725,459,721,456,795,300,835,218,859,178,876,167,895,160"/>
<area shape="poly" title=" " alt="" coords="895,161,619,163,442,158,262,147,178,135,179,129,263,141,442,153,620,158,895,155"/>
<area shape="poly" title=" " alt="" coords="857,94,791,83,792,78,857,88"/>
<area shape="poly" title=" " alt="" coords="875,128,862,133,822,156,785,184,732,233,728,229,782,180,819,152,859,128,873,123"/>
<area shape="poly" title=" " alt="" coords="1517,133,1367,133,1255,134,1255,129,1367,128,1517,128"/>
</map>
</div>

</div>
</div>
<a id="ad79469409af4199c4e1f1345c5703b29" name="ad79469409af4199c4e1f1345c5703b29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad79469409af4199c4e1f1345c5703b29">&#9670;&#160;</a></span>updateBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">void</a> updateBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *&#160;</td>
          <td class="paramname"><em>pFirst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *&#160;</td>
          <td class="paramname"><em>pLast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Conditionally write bytes from block of memory to storage. Values are written only if they differ from the one already saved at the same address. </p>
<dl class="section warning"><dt>Warning</dt><dd>The code assumes <code>address+(pLast-pFirst) &lt; api.length()</code>. I.e. that the block fits into the address space. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="storage__api_8h.html#a573585a4bfa716970289cff4af01c4d8" title="Conditionally write a byte to storage if it differs from the one already saved.">update</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">api</td><td>Raw storage API </td></tr>
    <tr><td class="paramname">address</td><td>the location to begin writing to (zero based) </td></tr>
    <tr><td class="paramname">pFirst</td><td>Points to the start of the memory block </td></tr>
    <tr><td class="paramname">pLast</td><td>Points to one byte past the end of the block </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_cgraph.png" border="0" usemap="#astorage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_cgraph" alt=""/></div>
<map name="astorage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_cgraph" id="astorage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_cgraph">
<area shape="rect" title="Conditionally write bytes from block of memory to storage. Values are written only if they differ fro..." alt="" coords="5,5,99,31"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f" title="Reads an integral type, timing out if necessary." alt="" coords="255,5,424,31"/>
<area shape="poly" title=" " alt="" coords="99,16,240,16,240,21,99,21"/>
<area shape="rect" href="storage__api_8cpp.html#a573585a4bfa716970289cff4af01c4d8" title="Conditionally write a byte to storage if it differs from the one already saved." alt="" coords="147,31,207,56"/>
<area shape="poly" title=" " alt="" coords="100,25,132,32,131,37,99,30"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gac5cac0fcdb201602960f6610b20a1f92" title="Has the current receive operation timed out?" alt="" coords="647,5,740,31"/>
<area shape="poly" title=" " alt="" coords="425,16,631,16,631,21,425,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga5370e4e80f694b4f34babb7335fbae52" title="Read from the serial port into the supplied buffer." alt="" coords="472,31,599,56"/>
<area shape="poly" title=" " alt="" coords="425,26,457,31,456,36,424,32"/>
<area shape="poly" title=" " alt="" coords="599,31,631,25,631,31,599,36"/>
<area shape="poly" title=" " alt="" coords="207,36,239,31,240,36,208,41"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_icgraph.png" border="0" usemap="#astorage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_icgraph" alt=""/></div>
<map name="astorage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_icgraph" id="astorage__api_8cpp_ad79469409af4199c4e1f1345c5703b29_icgraph">
<area shape="rect" title="Conditionally write bytes from block of memory to storage. Values are written only if they differ fro..." alt="" coords="1412,39,1505,64"/>
<area shape="rect" href="storage__api_8h.html#a39e71c020e9c61aa672e11059bbeefd6" title="Conditionally write bytes from a POD object to storage. Values are written only if they differ from t..." alt="" coords="1265,39,1364,64"/>
<area shape="poly" title=" " alt="" coords="1396,54,1364,54,1364,49,1396,49"/>
<area shape="rect" href="group__storage-calibration-tables.html#gaa488a262511ec237080221b99ff812f0" title="Store the CRC for one sensor curve in durable storage." alt="" coords="1081,13,1211,39"/>
<area shape="poly" title=" " alt="" coords="1250,44,1211,39,1212,33,1250,39"/>
<area shape="rect" href="group__storage-calibration-tables.html#ga406e39fadb4e9b3567b1769b2c172358" title="Store one sensor curve in durable storage." alt="" coords="1075,63,1217,88"/>
<area shape="poly" title=" " alt="" coords="1250,63,1218,68,1217,63,1249,58"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaf5b4ef8e0caf756c612a3bd48539556e" title="Update the oxygen sensor table from serialPayload." alt="" coords="846,5,1007,31"/>
<area shape="poly" title=" " alt="" coords="1066,26,1007,24,1007,18,1066,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gad58168d3dce22363cca07f6b43a9c898" title="Update a temperature calibration table from serialPayload." alt="" coords="826,55,1027,96"/>
<area shape="poly" title=" " alt="" coords="1071,46,1021,57,1019,52,1070,40"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gad3f266b2b216f7b2b7b3d08dd3661b6c" title="Processes a message once it has been fully received." alt="" coords="618,35,778,60"/>
<area shape="poly" title=" " alt="" coords="831,33,779,40,778,35,831,28"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga7e59b4f0d357a308ac2f7257cca678e1" title="The serial receive pump. Should be called whenever the serial port has data available to read." alt="" coords="471,35,570,60"/>
<area shape="poly" title=" " alt="" coords="603,50,571,50,571,45,603,45"/>
<area shape="rect" href="speeduino_8ino.html#aab2144d627465c54a1edaaf228daf884" title=" " alt="" coords="5,27,215,52"/>
<area shape="poly" title=" " alt="" coords="455,44,423,42,215,40,215,35,423,37,456,39"/>
<area shape="rect" href="comms__secondary_8cpp.html#a7c6918eaefbe2574c2a1133062129633" title=" " alt="" coords="263,52,423,78"/>
<area shape="poly" title=" " alt="" coords="456,56,424,60,423,54,455,51"/>
<area shape="poly" title=" " alt="" coords="247,57,215,54,215,48,247,52"/>
<area shape="poly" title=" " alt="" coords="810,64,778,60,778,55,811,59"/>
<area shape="poly" title=" " alt="" coords="1081,61,1026,46,980,34,981,29,1028,41,1082,56"/>
<area shape="poly" title=" " alt="" coords="1060,78,1027,78,1027,73,1060,73"/>
<area shape="rect" href="group__storage-calibration-tables.html#ga9e9b873a9688cb0ea4ccada839c8192b" title="Store the curves for all sensors in durable storage." alt="" coords="844,120,1009,146"/>
<area shape="poly" title=" " alt="" coords="1082,95,1028,110,981,122,980,117,1026,105,1081,90"/>
<area shape="rect" href="updates_8cpp.html#a719c025633fab0a1e49d6ec192c1c6bb" title=" " alt="" coords="656,120,740,146"/>
<area shape="poly" title=" " alt="" coords="828,136,741,136,741,130,828,130"/>
<area shape="rect" href="init_8cpp.html#adb296edeed2f9690941f64a06def7ec8" title=" " alt="" coords="479,120,562,146"/>
<area shape="poly" title=" " alt="" coords="640,136,562,136,562,130,640,130"/>
<area shape="rect" href="speeduino_8ino.html#a7dfd9b79bc5a37d7df40207afbc5431f" title=" " alt="" coords="316,120,370,146"/>
<area shape="poly" title=" " alt="" coords="463,136,370,136,370,130,463,130"/>
</map>
</div>

</div>
</div>
<a id="a32ce1aaf4c1b83189861a975b756ef67" name="a32ce1aaf4c1b83189861a975b756ef67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ce1aaf4c1b83189861a975b756ef67">&#9670;&#160;</a></span>updateBlockLimitWriteOps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a> updateBlockLimitWriteOps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="structstorage__api__t.html">storage_api_t</a> &amp;&#160;</td>
          <td class="paramname"><em>api</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *&#160;</td>
          <td class="paramname"><em>pFirst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">const</a> <a class="el" href="config__pages_8h.html#a3eca60932ee4119828944ccd69a6272b">byte</a> *&#160;</td>
          <td class="paramname"><em>pLast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>maxWrites</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Conditionally write bytes from block of memory to storage, with a limited number of write operations. </p>
<p>Write operations are typically pretty slow (E.g. 3.3ms on AVR EEPROM). If a block contains many bytes that need to be written, we can cause the system to stutter as the main loop stalls waiting for writes to complete. So instead we limit the number of write operations per call to this function.</p>
<dl class="section note"><dt>Note</dt><dd>This means that a call to this function may not update the entire block. If the return value is zero, we ran out of writes, and repeated calls will be required.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="storage__api_8h.html#ad79469409af4199c4e1f1345c5703b29" title="Conditionally write bytes from block of memory to storage. Values are written only if they differ fro...">updateBlock</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">api</td><td>Raw storage API </td></tr>
    <tr><td class="paramname">address</td><td>the location to begin writing to (zero based) </td></tr>
    <tr><td class="paramname">pFirst</td><td>Points to the start of the memory block </td></tr>
    <tr><td class="paramname">pLast</td><td>Points to one byte past the end of the block </td></tr>
    <tr><td class="paramname">maxWrites</td><td>Maximum number of write operations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of writes <em>remaining</em>. E.g. if maxWrites==7 and 2 bytes are written, result is 5 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_cgraph.png" border="0" usemap="#astorage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_cgraph" alt=""/></div>
<map name="astorage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_cgraph" id="astorage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_cgraph">
<area shape="rect" title="Conditionally write bytes from block of memory to storage, with a limited number of write operations." alt="" coords="5,5,182,31"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gaceea4a4b8c6f90cdc396b043773b709f" title="Reads an integral type, timing out if necessary." alt="" coords="338,5,507,31"/>
<area shape="poly" title=" " alt="" coords="182,16,323,16,323,21,182,21"/>
<area shape="rect" href="storage__api_8cpp.html#a573585a4bfa716970289cff4af01c4d8" title="Conditionally write a byte to storage if it differs from the one already saved." alt="" coords="230,31,290,56"/>
<area shape="poly" title=" " alt="" coords="182,29,215,34,214,39,182,34"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gac5cac0fcdb201602960f6610b20a1f92" title="Has the current receive operation timed out?" alt="" coords="730,5,823,31"/>
<area shape="poly" title=" " alt="" coords="508,16,714,16,714,21,508,21"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga5370e4e80f694b4f34babb7335fbae52" title="Read from the serial port into the supplied buffer." alt="" coords="555,31,682,56"/>
<area shape="poly" title=" " alt="" coords="508,26,540,31,539,36,507,32"/>
<area shape="poly" title=" " alt="" coords="682,31,714,25,714,31,682,36"/>
<area shape="poly" title=" " alt="" coords="290,36,322,31,323,36,291,41"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="storage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_icgraph.png" border="0" usemap="#astorage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_icgraph" alt=""/></div>
<map name="astorage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_icgraph" id="astorage__api_8cpp_a32ce1aaf4c1b83189861a975b756ef67_icgraph">
<area shape="rect" title="Conditionally write bytes from block of memory to storage, with a limited number of write operations." alt="" coords="1461,96,1637,122"/>
<area shape="rect" href="storage_8cpp.html#a1b9967f37ccf7c7e53c0465fdb3b1b47" title=" " alt="" coords="1344,71,1394,96"/>
<area shape="poly" title=" " alt="" coords="1445,97,1394,89,1394,84,1446,92"/>
<area shape="rect" href="storage_8cpp.html#acf75cd7cd16c60e69e7b81ab616d99a8" title=" " alt="" coords="1325,120,1413,146"/>
<area shape="poly" title=" " alt="" coords="1446,125,1414,130,1413,124,1445,120"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gad3f266b2b216f7b2b7b3d08dd3661b6c" title="Processes a message once it has been fully received." alt="" coords="618,44,778,70"/>
<area shape="poly" title=" " alt="" coords="1336,64,1308,48,1276,35,1209,20,1152,11,1101,8,1053,9,953,20,826,35,758,46,757,41,825,30,953,15,1053,4,1101,3,1153,6,1210,15,1277,30,1310,43,1339,59"/>
<area shape="rect" href="storage_8cpp.html#ac9d49faffe70e707152dc88e3b4c2ac4" title=" " alt="" coords="1211,95,1261,120"/>
<area shape="poly" title=" " alt="" coords="1329,93,1262,106,1261,100,1328,88"/>
<area shape="rect" href="storage_8cpp.html#a3d7868d131d0ebc01e92ce50476e9b9e" title=" " alt="" coords="1195,45,1277,71"/>
<area shape="poly" title=" " alt="" coords="1328,79,1276,68,1277,63,1329,73"/>
<area shape="rect" href="group__group-serial-comms-impl.html#ga7e59b4f0d357a308ac2f7257cca678e1" title="The serial receive pump. Should be called whenever the serial port has data available to read." alt="" coords="471,69,570,95"/>
<area shape="poly" title=" " alt="" coords="603,73,571,78,570,72,602,68"/>
<area shape="rect" href="speeduino_8ino.html#aab2144d627465c54a1edaaf228daf884" title=" " alt="" coords="5,93,215,119"/>
<area shape="poly" title=" " alt="" coords="456,84,423,83,343,81,263,83,178,95,177,90,262,78,343,76,423,78,456,78"/>
<area shape="rect" href="comms__secondary_8cpp.html#a7c6918eaefbe2574c2a1133062129633" title=" " alt="" coords="263,93,423,119"/>
<area shape="poly" title=" " alt="" coords="456,93,424,98,423,93,455,88"/>
<area shape="poly" title=" " alt="" coords="247,109,215,109,215,103,247,103"/>
<area shape="rect" href="group__storage-pages.html#ga7b9e369396806ef1d65673b569b7d273" title="Write one page from RAM to durable storage." alt="" coords="1068,120,1147,146"/>
<area shape="poly" title=" " alt="" coords="1201,81,1133,122,1130,117,1198,77"/>
<area shape="rect" href="group__group-serial-comms-impl.html#gae66e8182a3ace437a194321fef590ea3" title=" " alt="" coords="867,45,979,71"/>
<area shape="poly" title=" " alt="" coords="1073,113,1019,85,978,72,980,66,1021,80,1076,109"/>
<area shape="rect" href="sensors_8cpp.html#abb332d81410220fa4639b4b31816b1c7" title=" " alt="" coords="650,244,746,270"/>
<area shape="poly" title=" " alt="" coords="1075,156,1021,185,947,209,872,229,747,253,746,248,871,224,946,204,1019,180,1073,152"/>
<area shape="rect" href="group__storage-pages.html#ga29b75dec198b3e128a7b39d83666d058" title="Write all pages from RAM to durable storage." alt="" coords="872,144,974,170"/>
<area shape="poly" title=" " alt="" coords="1053,142,974,153,973,148,1052,137"/>
<area shape="rect" href="_t_s___command_button_handler_8cpp.html#a1d5b41f39bf9439c1cb139a2bb27f225" title=" " alt="" coords="826,95,1020,120"/>
<area shape="poly" title=" " alt="" coords="1052,128,1020,123,1021,118,1053,123"/>
<area shape="poly" title=" " alt="" coords="851,60,778,60,778,55,851,55"/>
<area shape="rect" href="init_8cpp.html#adb296edeed2f9690941f64a06def7ec8" title=" " alt="" coords="479,219,562,244"/>
<area shape="poly" title=" " alt="" coords="634,250,563,240,563,235,635,245"/>
<area shape="rect" href="speeduino_8ino.html#a7dfd9b79bc5a37d7df40207afbc5431f" title=" " alt="" coords="316,219,370,244"/>
<area shape="poly" title=" " alt="" coords="463,234,370,234,370,229,463,229"/>
<area shape="poly" title=" " alt="" coords="857,160,597,155,430,147,262,134,180,122,181,117,263,129,430,142,597,150,857,154"/>
<area shape="rect" href="updates_8cpp.html#a719c025633fab0a1e49d6ec192c1c6bb" title=" " alt="" coords="656,195,740,220"/>
<area shape="poly" title=" " alt="" coords="857,174,741,201,740,195,856,169"/>
<area shape="poly" title=" " alt="" coords="640,218,563,228,562,223,640,213"/>
<area shape="poly" title=" " alt="" coords="847,93,758,73,759,68,848,88"/>
<area shape="rect" href="comms__legacy_8cpp.html#a70fb263f2214d5c61eb49d6f8c33df4f" title=" " alt="" coords="623,93,773,119"/>
<area shape="poly" title=" " alt="" coords="810,109,774,109,774,104,810,104"/>
<area shape="poly" title=" " alt="" coords="607,96,571,91,571,86,608,91"/>
<area shape="poly" title=" " alt="" coords="1309,135,1148,135,1148,130,1309,130"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
