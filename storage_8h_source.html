<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Speeduino: speeduino/storage.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Speeduino_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Speeduino
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9dd927a2de2c3597e2b3a7dd174a4cd6.html">speeduino</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">storage.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="storage_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef STORAGE_H</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define STORAGE_H</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="globals_8h.html">globals.h</a>&quot;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#ac98869315dfb66d34ce1b2015f8afc40">writeAllConfig</a>();</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#a2b3daa967fcf9b48410920143dcb5219">writeConfig</a>(byte);</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#ad5ed6ddd9940c0097cc91774056df1c2">loadConfig</a>();</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#a369be74b7836bb9eb5a57c95db8d3052">loadCalibration</a>();</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#ac3efa003544375926eb7d8d88cf19523">writeCalibration</a>();</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#a70eb60432991bc783bc86caa092128f8">loadCalibration_new</a>();</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#a5b97d81cd62e15935845f61d5d8a8a08">writeCalibration_new</a>();</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//These are utility functions that prevent other files from having to use EEPROM.h directly</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;byte <a class="code" href="storage_8h.html#a2a0d3fa76548baa671184809ce8440ba">readLastBaro</a>();</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#ae0b063b0b13b59184d21d345582fea84">storeLastBaro</a>(byte);</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#a97fbbc7754a04f5f0c4ef85f13128c1c">storeCalibrationValue</a>(uint16_t, byte);</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;byte <a class="code" href="storage_8h.html#aaf46bc73c6a4df33773c6a4ce207191c">readEEPROMVersion</a>();</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#a3160da8d2e4e5126af369123c57eec55">storeEEPROMVersion</a>(byte);</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keywordtype">void</span> <a class="code" href="storage_8h.html#ac51b880ff80ca08a9c924ab3978a0b53">storePageCRC32</a>(byte, uint32_t);</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;uint32_t <a class="code" href="storage_8h.html#a335db842124a03bdd77bb0222b106fd6">readPageCRC32</a>(byte);</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#if defined(CORE_STM32) || defined(CORE_TEENSY) &amp; !defined(USE_SPI_EEPROM)</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#define EEPROM_MAX_WRITE_BLOCK 64 //The maximum number of write operations that will be performed in one go. If we try to write to the EEPROM too fast (Each write takes ~3ms) then the rest of the system can hang)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="storage_8h.html#a16acab7b89a84a781e32cade827627e1">   26</a></span>&#160;<span class="preprocessor">#define EEPROM_MAX_WRITE_BLOCK 30 //The maximum number of write operations that will be performed in one go. If we try to write to the EEPROM too fast (Each write takes ~3ms) then the rest of the system can hang)</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="storage_8h.html#aaf8ba209ce169eb65cf0d163c1ac3850">   28</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="storage_8h.html#aaf8ba209ce169eb65cf0d163c1ac3850">eepromWritesPending</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">Current layout of EEPROM data (Version 3) is as follows (All sizes are in bytes):</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">|---------------------------------------------------|</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">|Byte # |Size | Description                         |</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">|---------------------------------------------------|</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">| 0     |1    | Data structure version              |</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">| 1     |2    | X and Y sizes for VE table          |</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">| 3     |256  | VE Map (16x16)                      |</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">| 259   |16   | VE Table RPM bins                   |</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">| 275   |16   | VE Table MAP/TPS bins               |</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">| 291   |64   | Page 2 settings (Non-Map page)      |</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">| 355   |2    | X and Y sizes for Ign table         |</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">| 357   |256  | Ignition Map (16x16)                |</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">| 613   |16   | Ign Table RPM bins                  |</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">| 629   |16   | Ign Table MAP/TPS bins              |</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">| 645   |64   | Page 4 settings (Non-Map page)      |</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">| 709   |2    | X and Y sizes for AFR table         |</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">| 711   |256  | AFR Target Map (16x16)              |</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">| 967   |16   | AFR Table RPM bins                  |</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">| 983   |16   | AFR Table MAP/TPS bins              |</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">| 999   |64   | Remaining Page 3 settings           |</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">| 1063  |64   | Page 4 settings                     |</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">| 1127  |2    | X and Y sizes for boost table       |</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">| 1129  |64   | Boost Map (8x8)                     |</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">| 1193  |8    | Boost Table RPM bins                |</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">| 1201  |8    | Boost Table TPS bins                |</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">| 1209  |2    | X and Y sizes                       |</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">| 1211  |64   | PAGE 8 MAP2                         |</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">| 1275  |8    | Xbins Map2                          |</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">| 1283  |8    | Ybins Map2                          |</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">| 1291  |2    | X and Y sizes1                      |</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">| 1293``|36   | PAGE 9 MAP1                         |</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">| 1329  |12   | X and Y Bins1                       |</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">| 1341  |2    | X and Y size2                       |</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">| 1343  |36   | PAGE 9 MAP2                         |</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">| 1379  |6    | X and Y Bins2                       |</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">| 1391  |2    | X and Y sizes3                      |</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">| 1393  |36   | PAGE 9 MAP3                         |</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">| 1429  |6    | X and Y Bins3                       |</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">| 1441  |2    | X and Y size4                       |</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">| 1443  |36   | PAGE 9 MAP4                         |</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">| 1479  |6    | X and Y Bins4                       |</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">| 1500  |192  | CANBUS config and data (Table 10_)  |</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">| 1692  |192  | Table 11 - General settings         |</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">| 2385  |2    | X and Y sizes for wmi table         |</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">| 2387  |64   | WMI Map (8x8)                       |</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">| 2451  |8    | WMI Table RPM bins                  |</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">| 2459  |8    | WMI Table TPS bins                  |</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">|                                                   |</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">| 2514  |44   | Table CRC32 values. Last table first|</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">| 2558  |1    | Last recorded Baro value            |</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">| 2559  |512  | Calibration data (O2)               |</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">| 3071  |512  | Calibration data (IAT)              |</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">| 3583  |512  | Calibration data (CLT)              |</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">-----------------------------------------------------</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="storage_8h.html#ac69a61106c8c49b7098fa86e8b8a0ae1">   87</a></span>&#160;<span class="preprocessor">#define EEPROM_DATA_VERSION   0</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="storage_8h.html#a26da4e61da7c86dedd9fd3adf8132fd0">   89</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG1_XSIZE  1</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="storage_8h.html#a3bd369b8bb311472bcb4f2b2bd74a93b">   90</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG1_YSIZE  2</span></div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="storage_8h.html#a99a9c363e83201ebfafc3932b1a36357">   91</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG1_MAP    3</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="storage_8h.html#a80dee5184c4b4d6f77c016b79c958921">   92</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG1_XBINS  259</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="storage_8h.html#a7ccc52552284e9402a7d902acfe29cc8">   93</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG1_YBINS  275</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="storage_8h.html#a297ca20e451e29fa9364eb966bb2863a">   94</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG2_START  291</span></div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="storage_8h.html#aeec2ceb6e96530e38cab30dc955eb83c">   95</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG2_END    419</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="storage_8h.html#aff6c75d9b79e3443bfc1d2265d7647b5">   96</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG3_XSIZE  419</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="storage_8h.html#af0a3105c470b2e339e4b548c50fdb65a">   97</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG3_YSIZE  420</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="storage_8h.html#abb6e8da2685bff20dfd16d0f7acb84a7">   98</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG3_MAP    421</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="storage_8h.html#a558c358c16203010e667f9b3d208ad43">   99</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG3_XBINS  677</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="storage_8h.html#aafc587b2e7c3d8d3cf827a27f389535f">  100</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG3_YBINS  693</span></div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="storage_8h.html#a570b1e9639b766e710dbcec97e65846a">  101</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG4_START  709</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="storage_8h.html#ab84a9b208cebac08c4b3ae4c10376ebe">  102</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG4_END    837</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="storage_8h.html#afd97992453bab26ca0e7a2dc035a3bef">  103</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG5_XSIZE  837</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="storage_8h.html#a7b7ae7806f6896eda2791ab838f74585">  104</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG5_YSIZE  838</span></div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="storage_8h.html#ab77a2bc3dccb048dedf6669f4a8cc1fe">  105</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG5_MAP    839</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="storage_8h.html#a4aa132a4244f360b12a16049e54bad6a">  106</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG5_XBINS  1095</span></div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="storage_8h.html#a97fad1b84eb420e59a1f9e74b53529e4">  107</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG5_YBINS  1111</span></div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="storage_8h.html#aecd4038302615d7eaed7e366c6508ab8">  108</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG6_START  1127</span></div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="storage_8h.html#a09c19d0c4be3a52084b248832d3fb096">  109</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG6_END    1255</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="storage_8h.html#a9df9729cd4276170ef30bf3794f960e6">  110</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_XSIZE1 1255</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="storage_8h.html#a21a08f1808260e527c758a0bd9e98913">  111</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_YSIZE1 1256</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="storage_8h.html#a50fc966b5e0164c869d33c1824330f64">  112</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_MAP1   1257</span></div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="storage_8h.html#a95e7ae30bb91aaf96ccd4f2e29c0847b">  113</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_XBINS1 1321</span></div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="storage_8h.html#ae9f52d550bfaa7ede152a9aad4d31e9c">  114</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_YBINS1 1329</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="storage_8h.html#a3382e24ec84cf466a4705768de5d00d7">  115</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_XSIZE2 1337</span></div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="storage_8h.html#a96cec46f1b2c02c9a6fc7711111a7fa1">  116</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_YSIZE2 1338</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="storage_8h.html#ad7522485bfe93d21372747cff468d509">  117</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_MAP2   1339</span></div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="storage_8h.html#a65f658cb3e5ad70fa3871e96def14f8a">  118</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_XBINS2 1403</span></div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="storage_8h.html#adc57c9f2bcf54cbd02172010375b9e19">  119</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_YBINS2 1411</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="storage_8h.html#acf0ab5805ad8fb0401b8f07a627ceae9">  121</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_XSIZE3 1419</span></div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="storage_8h.html#ae88fb493e7ae0d1d9df97bce28a9c6d0">  122</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_YSIZE3 1420</span></div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="storage_8h.html#a686c55016bce702eee2eed82cacc5ebd">  123</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_MAP3   1421</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="storage_8h.html#a8312a4e19995ccda3564dad2badd7046">  125</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_XBINS3 1485</span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="storage_8h.html#a2b3746ddf9e09a5c0d651e795cbb09b6">  126</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_YBINS3 1493</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="storage_8h.html#ac813a49cbfbb81da72316e730bb3c8f2">  127</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG7_END    1501</span></div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="storage_8h.html#ab6d0c8a21627a8e92babf34b5f4038e3">  128</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XSIZE1 1501</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="storage_8h.html#a24f0d1e40ed67177612fc7d2e6933932">  129</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YSIZE1 1502</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="storage_8h.html#aa1cdb1e36874d79499274a41747280a2">  130</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_MAP1   1503</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="storage_8h.html#affedf8959a2646b45b64c613e8f91159">  131</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XBINS1 1539</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="storage_8h.html#aacfebb2ea12a210a4cf3136cd3cd98b1">  132</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YBINS1 1545</span></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="storage_8h.html#ad23bb462574928a64403ae7e5d56080f">  133</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XSIZE2 1551</span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="storage_8h.html#af7d2e0498d627ce7351192f977fa3530">  134</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YSIZE2 1552</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="storage_8h.html#a32df535c755a09f0135023d06e2aa8c1">  135</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_MAP2   1553</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="storage_8h.html#ac4ab9f80b053bc8d0b9098fa5b36cd84">  136</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XBINS2 1589</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="storage_8h.html#aa35cc1bb4465c3bbff12756ac35c500c">  137</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YBINS2 1595</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="storage_8h.html#a0a65995582b23a955e709986c05a1559">  138</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XSIZE3 1601</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="storage_8h.html#add7c367114dad92640e58c61b9bb7d32">  139</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YSIZE3 1602</span></div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="storage_8h.html#a2f9686a28fc9b8daa6622c27ef9e2c6b">  140</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_MAP3   1603</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="storage_8h.html#a97e563d01664e62fa65f283e8a4d8cd8">  141</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XBINS3 1639</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="storage_8h.html#aa63dbaa98fb86b5a2e01b7ea576f9653">  142</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YBINS3 1645</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="storage_8h.html#a4d10acc89610af1499252c9c881e6845">  143</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XSIZE4 1651</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="storage_8h.html#a6ed88800d892675e57472941cdead4f1">  144</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YSIZE4 1652</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="storage_8h.html#a7ae30b0df8de5bb7fd37ecacef2b57e2">  145</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_MAP4   1653</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="storage_8h.html#a1a3511ae9f7b5bd9ab7661a1d89d456c">  146</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_XBINS4 1689</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="storage_8h.html#acdd03e2602609b3f0ce9aeefb827c11a">  147</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG8_YBINS4 1695</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="storage_8h.html#a45de64e26b758d09d0addd653b535fc8">  148</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG9_START  1710</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="storage_8h.html#ac50bea032fda194d6d32d2f2b7b68b8c">  149</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG9_END    1902</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="storage_8h.html#a87b6d5e3f186b4178d0449745832c77d">  150</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG10_START 1902</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="storage_8h.html#ad0546573739c9890fca25dc7d65a0787">  151</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG10_END   2094</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="storage_8h.html#a99b3e88e4c2a59981064e8c3cbfd7096">  152</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG11_XSIZE 2094</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="storage_8h.html#a18e7eb54b5ce9fecbe1f20e0fdcfd8be">  153</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG11_YSIZE 2095</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="storage_8h.html#a08891960d2d04c41467b188d64caed33">  154</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG11_MAP   2096</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="storage_8h.html#a3755d5e9ff6767177c85b8450d0cc443">  155</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG11_XBINS 2352</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="storage_8h.html#a1cbcbc29654a651763dd5eb6a3994b1b">  156</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG11_YBINS 2369</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="storage_8h.html#abdab04b5cb19dbd8e7af19b636aed4cf">  157</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG11_END   2385</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="storage_8h.html#a151c9031f1a8e3c87312e0813507fa7e">  158</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG12_XSIZE 2385</span></div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="storage_8h.html#a2d86f4801fabd2ee31e1786613002386">  159</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG12_YSIZE 2386</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="storage_8h.html#a726563c3e4e522e843200e59384bc6ce">  160</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG12_MAP   2387</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="storage_8h.html#af965685b7041cd1d3bca7ef18bfebedf">  161</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG12_XBINS 2451</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="storage_8h.html#a0581ba7db7beb9a61d8f51dd044afc64">  162</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG12_YBINS 2459</span></div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="storage_8h.html#a887e721500546dea01559b23f8cfbcb2">  163</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG12_END   2467</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="storage_8h.html#a0c95ef59a60587f57ddd0fe7eda4c4ab">  164</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG13_START 2468</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="storage_8h.html#a79957a3f13354e33402bc861897a2849">  165</a></span>&#160;<span class="preprocessor">#define EEPROM_CONFIG13_END   2596</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">//Calibration data is stored at the end of the EEPROM (This is in case any further calibration tables are needed as they are large blocks)</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="storage_8h.html#a30f2c441fcd6eee70204fa7cf8e30ffb">  168</a></span>&#160;<span class="preprocessor">#define EEPROM_PAGE_CRC32     3690 //Size of this is 4 * &lt;number of pages&gt; (CRC32 = 32 bits): 3742 - (13 * 4) = 3690</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="storage_8h.html#a3883bd7685c795fc06ed435efa83dc2e">  169</a></span>&#160;<span class="preprocessor">#define EEPROM_LAST_BARO      3742 // 3743 - 1</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">//New values using 2D tables</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="storage_8h.html#afb395f3adf65eaad052499a5aac655c0">  171</a></span>&#160;<span class="preprocessor">#define EEPROM_CALIBRATION_O2   3743 //3839-96 +64</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="storage_8h.html#abe5e585d2b85b8b0d6f6e84e56fb91c6">  172</a></span>&#160;<span class="preprocessor">#define EEPROM_CALIBRATION_IAT  3839 //3967-128</span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="storage_8h.html#a5b1cea84b8376ac1a29567253fb5f798">  173</a></span>&#160;<span class="preprocessor">#define EEPROM_CALIBRATION_CLT  3967 //4095-128</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">//These were the values used previously when all calibration tables were 512 long. They need to be retained for the update process (202005 -&gt; 202008) can work. </span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="storage_8h.html#ae00868ed86b6eab1fb740cf37d04812e">  175</a></span>&#160;<span class="preprocessor">#define EEPROM_CALIBRATION_O2_OLD   2559</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="storage_8h.html#a57709c961266782984325e4f388f415d">  176</a></span>&#160;<span class="preprocessor">#define EEPROM_CALIBRATION_IAT_OLD  3071</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="storage_8h.html#a92d0dce5ac9a80f0042a8f709e697670">  177</a></span>&#160;<span class="preprocessor">#define EEPROM_CALIBRATION_CLT_OLD  3583</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#endif // STORAGE_H</span></div><div class="ttc" id="storage_8h_html_a2b3daa967fcf9b48410920143dcb5219"><div class="ttname"><a href="storage_8h.html#a2b3daa967fcf9b48410920143dcb5219">writeConfig</a></div><div class="ttdeci">void writeConfig(byte)</div><div class="ttdef"><b>Definition:</b> storage.ino:36</div></div>
<div class="ttc" id="storage_8h_html_a2a0d3fa76548baa671184809ce8440ba"><div class="ttname"><a href="storage_8h.html#a2a0d3fa76548baa671184809ce8440ba">readLastBaro</a></div><div class="ttdeci">byte readLastBaro()</div><div class="ttdef"><b>Definition:</b> storage.ino:839</div></div>
<div class="ttc" id="storage_8h_html_a5b97d81cd62e15935845f61d5d8a8a08"><div class="ttname"><a href="storage_8h.html#a5b97d81cd62e15935845f61d5d8a8a08">writeCalibration_new</a></div><div class="ttdeci">void writeCalibration_new()</div></div>
<div class="ttc" id="storage_8h_html_ae0b063b0b13b59184d21d345582fea84"><div class="ttname"><a href="storage_8h.html#ae0b063b0b13b59184d21d345582fea84">storeLastBaro</a></div><div class="ttdeci">void storeLastBaro(byte)</div><div class="ttdef"><b>Definition:</b> storage.ino:840</div></div>
<div class="ttc" id="globals_8h_html"><div class="ttname"><a href="globals_8h.html">globals.h</a></div></div>
<div class="ttc" id="storage_8h_html_aaf46bc73c6a4df33773c6a4ce207191c"><div class="ttname"><a href="storage_8h.html#aaf46bc73c6a4df33773c6a4ce207191c">readEEPROMVersion</a></div><div class="ttdeci">byte readEEPROMVersion()</div><div class="ttdef"><b>Definition:</b> storage.ino:842</div></div>
<div class="ttc" id="storage_8h_html_ac98869315dfb66d34ce1b2015f8afc40"><div class="ttname"><a href="storage_8h.html#ac98869315dfb66d34ce1b2015f8afc40">writeAllConfig</a></div><div class="ttdeci">void writeAllConfig()</div><div class="ttdef"><b>Definition:</b> storage.ino:14</div></div>
<div class="ttc" id="storage_8h_html_ac51b880ff80ca08a9c924ab3978a0b53"><div class="ttname"><a href="storage_8h.html#ac51b880ff80ca08a9c924ab3978a0b53">storePageCRC32</a></div><div class="ttdeci">void storePageCRC32(byte, uint32_t)</div><div class="ttdef"><b>Definition:</b> storage.ino:801</div></div>
<div class="ttc" id="storage_8h_html_a369be74b7836bb9eb5a57c95db8d3052"><div class="ttname"><a href="storage_8h.html#a369be74b7836bb9eb5a57c95db8d3052">loadCalibration</a></div><div class="ttdeci">void loadCalibration()</div><div class="ttdef"><b>Definition:</b> storage.ino:746</div></div>
<div class="ttc" id="storage_8h_html_aaf8ba209ce169eb65cf0d163c1ac3850"><div class="ttname"><a href="storage_8h.html#aaf8ba209ce169eb65cf0d163c1ac3850">eepromWritesPending</a></div><div class="ttdeci">bool eepromWritesPending</div><div class="ttdef"><b>Definition:</b> storage.h:28</div></div>
<div class="ttc" id="storage_8h_html_a335db842124a03bdd77bb0222b106fd6"><div class="ttname"><a href="storage_8h.html#a335db842124a03bdd77bb0222b106fd6">readPageCRC32</a></div><div class="ttdeci">uint32_t readPageCRC32(byte)</div><div class="ttdef"><b>Definition:</b> storage.ino:822</div></div>
<div class="ttc" id="storage_8h_html_a97fbbc7754a04f5f0c4ef85f13128c1c"><div class="ttname"><a href="storage_8h.html#a97fbbc7754a04f5f0c4ef85f13128c1c">storeCalibrationValue</a></div><div class="ttdeci">void storeCalibrationValue(uint16_t, byte)</div><div class="ttdef"><b>Definition:</b> storage.ino:841</div></div>
<div class="ttc" id="storage_8h_html_a3160da8d2e4e5126af369123c57eec55"><div class="ttname"><a href="storage_8h.html#a3160da8d2e4e5126af369123c57eec55">storeEEPROMVersion</a></div><div class="ttdeci">void storeEEPROMVersion(byte)</div><div class="ttdef"><b>Definition:</b> storage.ino:843</div></div>
<div class="ttc" id="storage_8h_html_ac3efa003544375926eb7d8d88cf19523"><div class="ttname"><a href="storage_8h.html#ac3efa003544375926eb7d8d88cf19523">writeCalibration</a></div><div class="ttdeci">void writeCalibration()</div><div class="ttdef"><b>Definition:</b> storage.ino:774</div></div>
<div class="ttc" id="storage_8h_html_a70eb60432991bc783bc86caa092128f8"><div class="ttname"><a href="storage_8h.html#a70eb60432991bc783bc86caa092128f8">loadCalibration_new</a></div><div class="ttdeci">void loadCalibration_new()</div></div>
<div class="ttc" id="storage_8h_html_ad5ed6ddd9940c0097cc91774056df1c2"><div class="ttname"><a href="storage_8h.html#ad5ed6ddd9940c0097cc91774056df1c2">loadConfig</a></div><div class="ttdeci">void loadConfig()</div><div class="ttdef"><b>Definition:</b> storage.ino:480</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
